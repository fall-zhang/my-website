"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3682],{9613:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(9496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},u=Object.keys(e);for(a=0;a<u.length;a++)n=u[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),i=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=i(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,u=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=i(n),d=r,k=p["".concat(s,".").concat(d)]||p[d]||m[d]||u;return n?a.createElement(k,l(l({ref:t},c),{},{components:n})):a.createElement(k,l({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var u=n.length,l=new Array(u);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:r,l[1]=o;for(var i=2;i<u;i++)l[i]=n[i];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1551:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>u,metadata:()=>o,toc:()=>i});var a=n(8028),r=(n(9496),n(9613));const u={},l=void 0,o={unversionedId:"React/-- Hooks",id:"React/-- Hooks",title:"-- Hooks",description:"Create by fall on 2021-12-26",source:"@site/my-docs/React/-- Hooks.md",sourceDirName:"React",slug:"/React/-- Hooks",permalink:"/my-website/docs/React/-- Hooks",draft:!1,editUrl:"https://github.com/my-docs/React/-- Hooks.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"5.1-kubernetes",permalink:"/my-website/docs/Linux & \u64cd\u4f5c\u7cfb\u7edf/5.1-kubernetes"},next:{title:"-- react\u63d2\u4ef6",permalink:"/my-website/docs/React/-- react\u63d2\u4ef6"}},s={},i=[{value:"useState",id:"usestate",level:2},{value:"useReduce",id:"usereduce",level:2},{value:"useEffect",id:"useeffect",level:2},{value:"\u6e05\u9664\u673a\u5236",id:"\u6e05\u9664\u673a\u5236",level:3},{value:"\u9009\u62e9\u6027\u76d1\u542c",id:"\u9009\u62e9\u6027\u76d1\u542c",level:3},{value:"\u5f02\u6b65\u5904\u7406",id:"\u5f02\u6b65\u5904\u7406",level:3},{value:"useLayoutEffect",id:"uselayouteffect",level:2},{value:"useCallback",id:"usecallback",level:2},{value:"useMemo",id:"usememo",level:2},{value:"useRef",id:"useref",level:2},{value:"useContext",id:"usecontext",level:2},{value:"\u81ea\u5b9a\u4e49 Hooks",id:"\u81ea\u5b9a\u4e49-hooks",level:2},{value:"\u53c2\u8003\u6587\u7ae0",id:"\u53c2\u8003\u6587\u7ae0",level:2}],c={toc:i},p="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Create by ",(0,r.kt)("strong",{parentName:"p"},"fall")," on 2021-12-26\nRecently revised in 2022-01-27")),(0,r.kt)("p",null,"\u4f7f\u7528 Hooks \u7684\u539f\u56e0"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u590d\u7528\u4e00\u4e2a\u6709\u6548\u7684\u7ec4\u4ef6\u592a\u9ebb\u70e6\u4e86"),(0,r.kt)("li",{parentName:"ul"},"\u751f\u547d\u5468\u671f\u903b\u8f91\u6df7\u4e71"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"this")," \u7684\u6307\u5411\u95ee\u9898")),(0,r.kt)("p",null,"\u6ce8\u610f\u4e8b\u9879"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53ea\u80fd\u5728\u51fd\u6570\u5185\u90e8\u7684\u6700\u5916\u5c42\u8c03\u7528 Hook\uff0c\u4e0d\u8981\u5728\u5faa\u73af\u3001\u6761\u4ef6\u5224\u65ad\u6216\u8005\u5b50\u51fd\u6570\u4e2d\u8c03\u7528"),(0,r.kt)("li",{parentName:"ul"},"\u53ea\u80fd\u5728 React \u7684\u51fd\u6570\u7ec4\u4ef6\u4e2d\u8c03\u7528 Hook\uff0c\u4e0d\u8981\u5728\u5176\u4ed6 JavaScript \u51fd\u6570\u4e2d\u8c03\u7528\uff08\u4f8b\u5916\uff1a\u81ea\u5b9a\u4e49 Hook\uff09")),(0,r.kt)("p",null,"\u4e09\u795e\u67f1\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"useState")," ",(0,r.kt)("inlineCode",{parentName:"p"},"useEffect")," ",(0,r.kt)("inlineCode",{parentName:"p"},"useCallback"),"\uff0c\u8fd9\u4e48\u4e00\u770b\uff0c\u5fc5\u987b\u638c\u63e1\u7684\u53ea\u6709\u4e09\u4e2a\u3002\u8fd8\u86ee\u7b80\u5355\u7684.jpg"),(0,r.kt)("h2",{id:"usestate"},"useState"),(0,r.kt)("p",null," useState \u603b\u662f\u66ff\u6362\u53d8\u91cf\u800c\u4e0d\u662f class \u7ec4\u4ef6\u4e2d\u7684\u5408\u5e76\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import { useState } from 'react'\nfunction MyComponent(){\n  const [count,setCount]= useState(0)\n  // useState \u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u7b2c\u4e00\u9879\u662f\u8bbe\u7f6e\u7684\u503c\uff0c\u8fd9\u91cc\u4e3a 0\n  // \u7b2c\u4e8c\u4e2a\u4e3a \u8bbe\u7f6e\u7684\u51fd\u6570\uff0c\u8c03\u7528\u53ef\u4ee5\u8bbf\u95ee setCount(count+1)\n  return(\n    <div>\n      <p>You already click {count} times</p>\n      <button onClick={()=>setCount(count+1)}>Add</button>\n    </div>\n  )\n}\n")),(0,r.kt)("p",null,"\u7279\u6027"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import {useState} from 'react'\nfunction Counter2(){\n  let [number,setNumber] = useState(0);\n  function alertNumber(){\n    setTimeout(()=>{\n      // 1 \u5982\u679c\u60f3\u8bbe\u7f6e number \u7684\u503c \n      // setNumber(number +1 ) // \u8fd9\u79cd\u65b9\u5f0f\u8bbe\u7f6e\u503c\uff0c\u53ea\u4f1a\u4f7f\u7528\u70b9\u51fb\u65f6\u7684\u503c\n      setNumber(number=>number+1) // \u4f20\u9012\u51fd\u6570\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u907f\u514d\n      // alert \u53ea\u80fd\u83b7\u53d6\u5230\u70b9\u51fb\u6309\u94ae\u65f6\u7684 number \u503c\n      alert(number);\n    },3000);\n  }\n  return (\n    <div>\n      <p>{number}</p>\n      <button onClick={(number)=>setNumber(number+1)}>+</button>\n      <button onClick={()=>alertNumber()}>alertNumber</button>\n    </div>\n  )\n}\n")),(0,r.kt)("p",null,"state"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function Compp(props){\n  console.log('render')\n  function initState(){\n    return {\n      age:12,\n      name:props\n    }\n  }\n  const [file,setFile] = useState(initState)\n  return(<div>\n    <h2>{file.age}</h2>\n    <button onClick={()=>setFile({age:file.age+1,name:props})}>Plus</button>\n    <button onClick={()=>setFile({age:file.age+1,name:props})}>Plus</button>\n    </div>)\n}\n")),(0,r.kt)("h2",{id:"usereduce"},"useReduce"),(0,r.kt)("p",null,"\u5904\u7406\u5168\u5c40\u72b6\u6001"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const DemoUseReducer = ()=>{\n  /* number\u4e3a\u66f4\u65b0\u540e\u7684state\u503c,  dispatchNumbner \u4e3a\u5f53\u524d\u7684\u6d3e\u53d1\u51fd\u6570 */\n  const [ number , dispatchNumbner ] = useReducer((state,action)=>{\n    const { payload , name  } = action\n    switch(name){\n      case 'add':\n        return state + 1\n      case 'sub':\n        return state - 1 \n      case 'reset':\n        return payload       \n    }\n    /* return\u7684\u503c\u4e3a\u65b0\u7684 state */\n    return state\n  },0)\n  return (\n  <div>\n    \u5f53\u524d\u503c\uff1a{ number }\n  { /* \u6d3e\u53d1\u66f4\u65b0 */ }\n  <button onClick={()=>dispatchNumbner({ name:'add' })} >\u589e\u52a0</button>\n<button onClick={()=>dispatchNumbner({ name:'sub' })} >\u51cf\u5c11</button>\n<button onClick={()=>dispatchNumbner({ name:'reset' ,payload:666 })} >\u8d4b\u503c</button>\n{ /* \u628adispatch \u548c state \u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6  */ }\n<MyChildren  dispatch={ dispatchNumbner } State={{ number }} />\n</div>\n)\n}\n")),(0,r.kt)("h2",{id:"useeffect"},"useEffect"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5c06\u6240\u6709\u7684\u526f\u4f5c\u7528\u6574\u5408\u5230\u4e00\u4e2a\u51fd\u6570\u4e2d\uff0c\u5982\u679c\u51fa\u73b0\u4e86\u6570\u636e\u7684\u8f6c\u53d8\uff0c\u6216\u8005\u662f\u751f\u547d\u5468\u671f\u7684\u53d8\u5316\uff0c\u5c31\u4f1a\u6267\u884c\u8be5 hook\uff0c\u540c\u65f6\u4e5f\u652f\u6301\u5b9a\u4e49\u591a\u4e2a\u94a9\u5b50\u3002"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"useEffect")," \u4f1a\u8ba9 React \u5728\u5b8c\u6210\u5bf9 DOM \u7684\u66f4\u6539\u540e\uff0c\u8fd0\u884c\u4f60\u7684 useEffect \u51fd\u6570\u3002\u7531\u4e8e\u526f\u4f5c\u7528\u51fd\u6570\u662f\u5728\u7ec4\u4ef6\u5185\u58f0\u660e\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bbf\u95ee\u5230\u7ec4\u4ef6\u5185\u90e8\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"props"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"state"),"\u3002")),(0,r.kt)("p",null,"\u6267\u884c\u987a\u5e8f\uff1a\u7ec4\u4ef6\u66f4\u65b0\u6302\u8f7d\u5b8c\u6210 -> \u6d4f\u89c8\u5668dom \u7ed8\u5236\u5b8c\u6210 -> \u6267\u884cuseEffect\u56de\u8c03\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"React \u4f1a\u5728\u6bcf\u6b21\u6e32\u67d3\u540e\u8c03\u7528\u526f\u4f5c\u7528\u51fd\u6570\uff08useEffect\uff09 \u2014\u2014 \u5305\u62ec\u7b2c\u4e00\u6b21\u6e32\u67d3\u7684\u65f6\u5019\u3002"),(0,r.kt)("li",{parentName:"ul"},"React \u4fdd\u8bc1\u4e86\u6bcf\u6b21\u8fd0\u884c effect \u7684\u540c\u65f6\uff0cDOM \u90fd\u5df2\u7ecf\u66f4\u65b0\u5b8c\u6bd5\uff0c\u5373\u53ef\u4ee5\u83b7\u53d6\u5230 DOM\u3002"),(0,r.kt)("li",{parentName:"ul"},"React \u4f1a\u4fdd\u5b58\u4f60\u4f20\u9012\u7684\u51fd\u6570\uff08\u6211\u4eec\u5c06\u5b83\u79f0\u4e4b\u4e3a \u201ceffect\u201d\uff09\uff0c\u5e76\u4e14\u5728\u6267\u884c DOM \u66f4\u65b0\u4e4b\u540e\u8c03\u7528\u5b83\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6bcf\u6b21\u6267\u884c\u7684\u65f6\u5019\uff0c\u90fd\u4f7f\u7528\u5f53\u65f6\u7684\u526f\u4f5c\u7528\u7a7a\u95f4\u53bb\u6267\u884c\u3002\u5b98\u65b9\u6587\u6863\u7684\u8bdd\u6765\u8bf4\uff0c\u6bcf\u4e2a effect\u201c\u5c5e\u4e8e\u201d\u4e00\u6b21\u7279\u5b9a\u7684\u6e32\u67d3\u3002\uff08\u8bc1\u660e\u53ef\u4ee5\u770b\u4e0b\u9762\u7684 ",(0,r.kt)("em",{parentName:"li"},"\u7279\u5b9a\u7684\u6e32\u67d3\u8bc1\u660e"),"\uff09"),(0,r.kt)("li",{parentName:"ul"},"effect \u4e0d\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u66f4\u65b0\u5c4f\u5e55\uff0c\u8ba9\u4f60\u7684\u5e94\u7528\u770b\u8d77\u6765\u54cd\u5e94\u66f4\u5feb\u3002")),(0,r.kt)("p",null,"\u6570\u636e\u83b7\u53d6\u3001\u8bbe\u7f6e\u8ba2\u9605\u4ee5\u53ca\u624b\u52a8\u66f4\u6539 React \u7ec4\u4ef6\u4e2d\u7684 DOM \u90fd\u5c5e\u4e8e\u526f\u4f5c\u7528\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// \u7279\u5b9a\u7684\u6e32\u67d3\u8bc1\u660e\nimport React,{useState,useEffect} from 'react'\nfunction Content(){\n    const [count,setCount] = useState(0)\n  useEffect(()=>{\n    setTimeout((()=>{\n      console.log(count) // count \u8f93\u51fa\u4e3a 0 1 2 3 4 \uff0c\u56e0\u4e3a setTimeout \u6240\u5904\u4f5c\u7528\u57df\u4e0d\u540c\n    }),5000)\n  })\n  return(\n    <div>\n      <h2>\u5f53\u524d\u7684 count \u503c\u4e3a\uff1a{count}</h2>\n      <button onClick={()=>setCount(count+1)}>\u70b9\u51fb\u8f93\u51fa\u5f53\u524d\u503c</button>\n    </div>\n  )\n}\n")),(0,r.kt)("h3",{id:"\u6e05\u9664\u673a\u5236"},"\u6e05\u9664\u673a\u5236"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"uesEffect")," \u4e2d\uff0c\u901a\u8fc7\u8fd4\u56de\u51fd\u6570\u6765\u6e05\u9664\u526f\u4f5c\u7528"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6709\u4e9b\u4ee3\u7801\u526f\u4f5c\u7528\u65e0\u9700\u8fdb\u884c\u6e05\u9664\uff0c\u6bd4\u5982\u8bf4\u7f51\u7edc\u8bf7\u6c42\u548c DOM \u7ed8\u5236\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u6709\u4e9b\u4ee3\u7801\u9700\u8981\u8fdb\u884c\u6e05\u9664\uff0c\u6bd4\u5982\u8bf4\u76d1\u542c onMouseMove \u8ba2\u9605\u5916\u90e8\u6570\u636e\u6e90\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React,{useState,useEffect} from 'react'\nfunction FriendStatus(props){\n  const [isOnline,setIsOnline] = useState(null)\n  useEffect(()=>{\n    function handleStatusChange(status){\n      setIsOnline(status.isOnline)\n    }\n    ChatAPI.subscribeToFriendStatus(props.friend.id,handleStatusChange)\n    // \u901a\u8fc7\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u7528\u6765\u6e05\u9664\u526f\u4f5c\u7528\n    // return ()=>{} \u4e5f\u53ef\u4ee5\u8fd4\u56de\u7bad\u5934\u51fd\u6570\n    return function cleanup(){\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id,handleStatusChange)\n    }\n  })\n  if(isOnline === null){\n        return 'loading...'\n  }\n  return isOnline ? 'Online' : 'Offline'\n}\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"class \u4e2d\u7684\u6240\u6709\u4ee3\u7801\u90fd\u662f\u6309\u7167\u751f\u547d\u5468\u671f\u8fdb\u884c\u5206\u5272\u7684\u2014\u2014\u4ee5\u751f\u547d\u5468\u671f\u4e3a\u903b\u8f91"),(0,r.kt)("p",{parentName:"blockquote"},"Hook \u4e2d\u7684\u4ee3\u7801\u662f\u6309\u7167\u4ee3\u7801\u7684\u7528\u9014\u8fdb\u884c\u5206\u79bb\u7684\u2014\u2014\u4ee5\u529f\u80fd\u4e3a\u903b\u8f91"),(0,r.kt)("p",{parentName:"blockquote"},"\u4ece\u800c\u5b9e\u73b0\u5173\u6ce8\u70b9\u7684\u5207\u6362")),(0,r.kt)("h3",{id:"\u9009\u62e9\u6027\u76d1\u542c"},"\u9009\u62e9\u6027\u76d1\u542c"),(0,r.kt)("p",null,"\u901a\u8fc7\u53ea\u76d1\u542c\u4e00\u90e8\u5206\u6570\u636e\u5b9e\u73b0\u9009\u62e9\u6027\u76d1\u542c\u4ee5\u53ca\u8df3\u8fc7 Effect \u8fdb\u884c\u4f18\u5316"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import {useState,useEffect} from 'react'\nfunction Example(){\n  cost [count,setCount]= useState(0)\n  useEffect(()=>{\n    // \u66f4\u6539\u5f53\u524d\u6587\u6863\u7684\u6807\u9898\n    document.title = '\u522b\u70b9\u4e86\uff0c\u90fd\u70b9' + count +'\u6b21\u4e86'\n  },[count])// useEffect \u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u660e\uff0c\u53ea\u6709 count \u53d1\u751f\u53d8\u5316\uff0c\u624d\u4f1a\u6267\u884c\u8be5\u526f\u4f5c\u7528\u51fd\u6570\n  // \u5982\u679c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a [] \u8868\u660e\uff0c\u53ea\u5728\u7b2c\u4e00\u6b21\u6e32\u67d3\u540e\u6267\u884c\u4e00\u6b21\n  return(\n    <div>\n      <p>\u4f60\u70b9\u4e86 {count} \u6b21\u4e86</p>\n      <button onClick={()=>setCount(count+1)}>\u70b9\u554a</button>\n    </div>)\n}\n")),(0,r.kt)("h3",{id:"\u5f02\u6b65\u5904\u7406"},"\u5f02\u6b65\u5904\u7406"),(0,r.kt)("p",null,"\u5982\u679c\u60f3\u8981\u5728 useEffect \u4e2d\u4f7f\u7528\u5f02\u6b65\u662f\u4e0d\u80fd\u73b0\u5b9e\u7684\uff0c\u6240\u4ee5\u9700\u8981\u989d\u5916\u4e00\u5c42\u5c01\u88c5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const asyncEffect = async (callback, deps)=>{\n  useEffect(()=>{\n    callback()\n  },deps)\n}\n")),(0,r.kt)("h2",{id:"uselayouteffect"},"useLayoutEffect"),(0,r.kt)("p",null,"\u6267\u884c\u987a\u5e8f \u7ec4\u4ef6\u66f4\u65b0\u6302\u8f7d\u5b8c\u6210 ->  \u6267\u884c useLayoutEffect \u56de\u8c03-> \u6d4f\u89c8\u5668 dom \u7ed8\u5236\u5b8c\u6210"),(0,r.kt)("p",null,"\u5373\uff1a\u5728\u6d4f\u89c8\u5668\u7ed8\u5236\u4e4b\u524d\u6267\u884c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'const DemoUseLayoutEffect = () => {\n  const target = useRef()\n  useLayoutEffect(() => {\n    /*\u6211\u4eec\u9700\u8981\u5728dom\u7ed8\u5236\u4e4b\u524d\uff0c\u79fb\u52a8dom\u5230\u5236\u5b9a\u4f4d\u7f6e*/\n    const { x ,y } = getPositon() /* \u83b7\u53d6\u8981\u79fb\u52a8\u7684 x,y\u5750\u6807 */\n    animate(target.current,{ x,y })\n  }, []);\n  return (\n    <div>\n      <span ref={ target } className="animate"></span>\n    </div>\n  )\n}\n')),(0,r.kt)("h2",{id:"usecallback"},"useCallback"),(0,r.kt)("h2",{id:"usememo"},"useMemo"),(0,r.kt)("p",null,"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u53ea\u8981\u7236\u7ec4\u4ef6\u6539\u53d8\u4e86\uff0c\u4e0d\u7ba1\u5b50\u7ec4\u4ef6\u662f\u5426\u4f9d\u8d56\u8be5\u72b6\u6001\uff0c\u5b50\u7ec4\u4ef6\u4e5f\u4f1a\u91cd\u65b0\u6e32\u67d3"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c7b\u7ec4\u4ef6\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"pureComponent")),(0,r.kt)("li",{parentName:"ul"},"\u51fd\u6570\u7ec4\u4ef6\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"React.memo"),"\uff0c\u5c06\u7ec4\u4ef6\u4f20\u9012\u7ed9 memo \u4e4b\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7ec4\u4ef6\uff0c\u5982\u679c\u63a5\u6536\u5230\u7684\u5c5e\u6027\u4e0d\u53d8\uff0c\u5c31\u4e0d\u4f1a\u91cd\u65b0\u6e32\u67d3")),(0,r.kt)("h2",{id:"useref"},"useRef"),(0,r.kt)("p",null,"\u83b7\u53d6 DOM"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'function MyComponent(){\n  const [count,setCount]= React.useState(0)\n  const onAdd = ()=>{\n    setCount(count+1)\n  }\n  const onShow= ()=>{\n    alert()\n  }\n  const myInput = React.useRef(null)\n  return (\n    <div>\n        <h2>\u5f53\u524d\u663e\u5361\u6570\u91cf\u4e3a\uff1a{count}</h2>\n      <input type="text" ref={myInput}></input>\n      <button onClick={onAdd}>\u7ed9\u6211\u52a0\u5361</button>\n      <button onClick={onShow}>\u6211\u6709\u591a\u5c11\u5361\uff1f</button>\n    </div>\n  )\n}\n')),(0,r.kt)("p",null,"useState \u5728\u8bbe\u7f6e\u65b0\u7684\u503c\u65f6\u4f1a\u89e6\u53d1\u66f4\u65b0\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u4e00\u503c\u5728\u51fd\u6570\u5185\uff0c\u4e0b\u6b21\u6267\u884c\u65f6\u5c31\u4f1a\u53d8\u4e3a\u9ed8\u8ba4\uff0cuseRef \u662f\u5b58\u50a8\u540e\uff0c\u4e0d\u4f1a\u6539\u53d8"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"function MyText(){\n  const currenRef = useRef('InitialData')\n  return (\n    <div>\n      {}\n    </div>\n  )\n}\n")),(0,r.kt)("h2",{id:"usecontext"},"useContext"),(0,r.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 useContext\uff0c\u6765\u83b7\u53d6\u7236\u7ea7\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684context\u503c\uff0c\u8fd9\u4e2a\u5f53\u524d\u503c\u5c31\u662f\u6700\u8fd1\u7684\u7236\u7ea7\u7ec4\u4ef6 Provider \u8bbe\u7f6e\u7684value \u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"type ActionOne ={\n  name:'add'|'sub'|'reset'\n  payload?:any\n}\ntype Action = ActionOne\nconst DemoUseReducer = () => {\n  /* number\u4e3a\u66f4\u65b0\u540e\u7684state\u503c,  dispatchNumbner \u4e3a\u5f53\u524d\u7684\u6d3e\u53d1\u51fd\u6570 */\n  const [number, dispatchNumbner] = useReducer((state:number, action:Action) => {\n    const { name,payload } = action\n    /* return\u7684\u503c\u4e3a\u65b0\u7684state */\n    switch (name) {\n      case 'add':\n        return state + 1\n      case 'sub':\n        return state - 1\n      case 'reset':\n        return payload\n    }\n    return state\n  }, 0)\n  return (\n    <div>\n      \u5f53\u524d\u503c\uff1a{number}\n      { /* \u6d3e\u53d1\u66f4\u65b0 */}\n      <button onClick={() => dispatchNumbner({ name: 'add' })} >\u589e\u52a0</button>\n      <button onClick={() => dispatchNumbner({ name: 'sub' })} >\u51cf\u5c11</button>\n      <button onClick={() => dispatchNumbner({ name: 'reset', payload: 666 })} >\u8d4b\u503c</button>\n      { /* \u628adispatch \u548c state \u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6  */}\n      <MyChildren dispatch={dispatchNumbner} State={{ number }} />\n    </div>\n  )\n}\n")),(0,r.kt)("h2",{id:"\u81ea\u5b9a\u4e49-hooks"},"\u81ea\u5b9a\u4e49 Hooks"),(0,r.kt)("p",null,"\u5b9a\u4e49"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// useFriendStatus.js\nimport React,{useState,useEffect} from 'react'\nfunction useFriendStatus(friendId){\n  const [isOnline,setIsOnline] = useState(null)\n  function handleStatusChange(status){\n    setIsOnline(status.isOnline)\n  }\n  useEffect(()=>{\n    ChatAPI.subscribeToFriendStatus(friendId,handleStatusChange)\n    return()=>{\n      ChatAPI.unsubscribeToFriendStatus(friendId,handleStatusChange)\n    }\n  })\n  return isOnline\n}\nexport default useFriendStatus\n")),(0,r.kt)("p",null,"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// FriendStatus.jsx\nimport React,{useState,useEffect} from 'react'\nimport useFriendStatus from 'useFriendStatus.js'\nfunction FriendStatus(props){\n  const isOnline = useFriendStatus(props.friend.id)\n  if(isOnline === null){\n    return 'loading...'\n  }\n  return isOnline ? 'online' : 'offline'\n}\n// FriendListItem.jsx\nimport React,{useState,useEffect} from 'react'\nimport useFriendStatus from 'useFriendStatus.js'\nfunction FriendListItem(props){\n  const isOnline = useFriendStatus(props.friend.id)\n  if(isOnline === null){\n    return 'loading...'\n  }\n  return (\n  <div style={isOnline?{color:green}:{color:red}}>\n    {props.friend.name}\n  </div>\n  )\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"})),(0,r.kt)("h2",{id:"\u53c2\u8003\u6587\u7ae0"},"\u53c2\u8003\u6587\u7ae0"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u4f5c\u8005"),(0,r.kt)("th",{parentName:"tr",align:null},"\u94fe\u63a5"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"React\u5b98\u65b9\u6587\u6863"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://react.docschina.org/docs/hooks-effect.html"},"https://react.docschina.org/docs/hooks-effect.html"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u6211\u4e0d\u662f\u5916\u661f\u4eba"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://juejin.cn/post/6864438643727433741"},"https://juejin.cn/post/6864438643727433741"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})))))}m.isMDXComponent=!0}}]);