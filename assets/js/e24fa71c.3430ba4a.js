"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1376],{9613:(e,t,n)=>{n.d(t,{Zo:()=>i,kt:()=>f});var a=n(9496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},i=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,i=u(e,["components","mdxType","originalType","parentName"]),p=l(n),m=r,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return n?a.createElement(f,c(c({ref:t},i),{},{components:n})):a.createElement(f,c({ref:t},i))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=m;var u={};for(var s in t)hasOwnProperty.call(t,s)&&(u[s]=t[s]);u.originalType=e,u[p]="string"==typeof e?e:r,c[1]=u;for(var l=2;l<o;l++)c[l]=n[l];return a.createElement.apply(null,c)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8435:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>u,toc:()=>l});var a=n(8028),r=(n(9496),n(9613));const o={},c=void 0,u={unversionedId:"React/4.3-React+TypeScript",id:"React/4.3-React+TypeScript",title:"4.3-React+TypeScript",description:"Create by fall on 2022-04-05",source:"@site/my-docs/React/4.3-React+TypeScript.md",sourceDirName:"React",slug:"/React/4.3-React+TypeScript",permalink:"/my-website/docs/React/4.3-React+TypeScript",draft:!1,editUrl:"https://github.com/my-docs/React/4.3-React+TypeScript.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"4.2-React+CSS",permalink:"/my-website/docs/React/4.2-React+CSS"},next:{title:"4.4-React-Router",permalink:"/my-website/docs/React/4.4-React-Router"}},s={},l=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"Hooks",id:"hooks",level:3},{value:"Hello World",id:"hello-world",level:2}],i={toc:l},p="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Create by ",(0,r.kt)("strong",{parentName:"p"},"fall")," on 2022-04-05\nRecently revised in 2022-04-05")),(0,r.kt)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"create-react-app")," \u6dfb\u52a0\u6a21\u677f")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx create-react-app my-app --template typescript\n")),(0,r.kt)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"React.FC")," \u662f TypeScript \u4e2d\u7684\u4e00\u4e2a\u6cdb\u578b\uff0cFC \u662f Function Component \u7684\u7f29\u5199\uff0c\u4e5f\u53ef\u4ee5\u5199\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"React.FunctionComponent")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// \u6cdb\u578b\u4e2d\u5305\u542b\u4e86 PropsWithChildren \u7684\u6cdb\u578b\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5b9a\u4e49 children\uff0c\u5982\u679c\u8981\u6dfb\u52a0\u5176\u4ed6\u5c5e\u6027\uff0c\u9700\u8981\u6dfb\u52a0\u7c7b\u578b\u6ce8\u91ca\uff0c\u6bd4\u5982\u8fd9\u91cc\u7684 message\nconst MyComponent:React.FC<{message:string}> = ({message})=>{\n  return (\n    <div>{message}</div>\n  )\n}\n")),(0,r.kt)("h3",{id:"hooks"},"Hooks"),(0,r.kt)("p",null,"useState"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import {useState} from 'react'\nconst [val,setVal] = useState(22)\n// \u6ca1\u6709\u521d\u59cb\u503c\uff0c\u6216\u8005\u662f null\ntype AppProps = {message:string}\nconst App = ()=>{\n  const [data] = useState<AppProps |null>(null)\n  return <div>{data?.message}</div>\n}\n")),(0,r.kt)("p",null,"useEffect"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import {useEffect} from 'react'\nfunction DealyedEffect(props:{timerMs:number}){\n  const {timerMs} = props\n  useEffect(()=>{\n    const timer = setTimeout(()=>{\n      console.log('yep')\n    },timerMs)\n    return ()=>clearTimeout(timer)\n  },[timerMs])\n  return null\n}\nuseEffect(()=>{\n  (async ()=>{\n    const {data} = await ajax(params)\n  })()\n},[params])\nuseEffect(()=>{\n  ajax(params).then(res=>{\n    // todo\n  })\n})\n")),(0,r.kt)("p",null,"useRef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function TextInputWithFocusButton(){\n  const inputEl = React.useRef<HTMLInputElement>(null)\n  const onButtonClick = ()=>{\n    if(inputEl && inputEl.current){\n      input.current.focus()\n    }\n    inputEl.current?.focus()\n  }\n  return (\n    <div>\n      <input ref={inputEl} type='text' />\n      <button onClick={onButtonClick}>Focus on Input</button>\n    </div>\n  )\n}\n")),(0,r.kt)("p",null,"useReducer"),(0,r.kt)("p",null,"\u4e00\u4e2a\u94a9\u5b50\uff0c\u725b\u903c\u7684\u94a9\u5b50\uff0c\u5148\u4f20\u5165\u65b9\u6cd5\uff0c\u540e\u4f20\u5165\u521d\u59cb\u53c2\u6570\uff0creturn\u7684\u503c\uff0c\u5c31\u662f\u51fd\u6570\u7684\u503c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const initialState = { count: 0 }\ntype ACTIONTYPE =\n  | { type: 'increment', payload: number }\n  | { type: 'decrement', payload: string }\n  | { type: 'inital' }\nfunction reducer(state: typeof initialState, action: ACTIONTYPE) {\n  switch (action.type) {\n    case 'increment':\n      return { count: state.count + action.payload }\n    case 'decrement':\n      return { count: state.count - Number(action.payload) }\n    case 'inital':\n      return { count: initialState.count }\n    default:\n      throw new Error()\n  }\n}\nfunction Counter() {\n  const [state, dispatch] = useReducer(reducer, initialState)\n  return (\n    <div>\n      \u5269\u4f59\u5361:{state.count}\n      <button onClick={() => dispatch({ type: 'decrement', payload: '2' })}>\u629b\u5361\uff01</button>\n      <button onClick={() => dispatch({ type: 'increment', payload: 3 })}>\u52a0\u5361\uff01</button>\n      <button onClick={() => dispatch({ type: 'inital' })}>\u5f52\u96f6</button>\n    </div>\n  )\n}\n")),(0,r.kt)("p",null,"useContext"),(0,r.kt)("p",null,"useContext \u548c useReducer \u7ed3\u5408\u4f7f\u7528\uff0c\u7528\u6765\u7ba1\u7406\u5168\u5c40\u6570\u636e\u6d41"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"interface AppContextInterface {\n  state:typeof initialState\n  dispatch:React.Dispatch<ACTIONTYPE>\n}\n// \u521b\u5efa context\nconst AppCtx = React.createContext<AppContextInterface>({\n  state:initialState,\n  dispatch:(action)=>action\n})\nconst App = ():React.ReactNode=>{\n  const [state,dispathc]=useReducer(reducer,initialState)\n  return (\n    <AppCtx.provider value={{state,disatch}}>\n        <Counter />\n    </AppCtx.provider>\n  )\n}\n// \u4f7f\u7528 context\nfunction Consumer(){\n  const {state,dispatch} = React.useContext(AppCtx)\n  return (\n    <div>\n        Count:{state.count}\n      <button onClick={()=>dispatch({type:'decrement',payload:'5'})}>-</button>\n      <button onClick={()=>dispatch({type:'increment',payload:5})}>-</button>\n    </div>\n  )\n}\n")),(0,r.kt)("p",null,"\u81ea\u5b9a\u4e49 Hooks"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export function useLoading(){\n  const [isLoading,setState] = React.useState(false)\n  const load = (onePromise:Promise<any>)=>{\n    setState(true)\n    return onePromise.finally(()=setState(false))\n  }\n  return [isLoading,load] as const\n  // return [isLoading,load] as [boolean,(onePromise:Promise<any>)=>Promise<any>] \n}\n\n// \u5143\u7ec4\nfunction tuplify<T extends any[]>(...elements:T){\n  return elements\n}\nfunction useArray(){\n  const numberValue = useRef(3).current\n  const functionValue = useRef(()=>{}).current\n  return [numberValue,functionValue] as const\n}\nfunction useTuple(){\n  const numberValue = useRef(3).current\n  const functionValue = useRef(()=>{}).current\n  return tuplify(numberValue,functionValue)\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const initVal = {\n   name:'\u5218\u534e',\n  count:0\n}\ntype DealType={\n  type:'add'\n  value:number\n}|{\n  type:'reduce'\n  value:number\n}\nfunction handsome(state:typeof initVal,deal:DealType){\n  switch(deal.type){\n    case 'add':\n      return {name:'\u5218\u534e',count:deal.value+state.count}\n    case 'reduce':\n      return {name:'\u5218\u534e',count:state.count-deal.value}\n    default:\n      throw new Error('\u6ca1\u6709\u5bf9\u5e94\u7684 useReduce\u64cd\u4f5c')\n  }\n}\nconst App:React.FC = function(){\n  const [state,dispatch] = useReducer(handsome,{name:'',count:1})\n  return (\n    <div>\n      \u5f53\u524d\u7684\u4eba\u540d\uff1a{state.name}\n      <div></div>\n      \u5f53\u524d\u7684\u94b1\uff1a{state.count}\n      <button onClick={()=>dispatch({type:'add',value:20})}>\u52a0\u94b1</button>\n      <button onClick={()=>dispatch({type:'reduce',value:177})}>\u6263\u94b1</button>\n    </div>\n  )\n}\n")),(0,r.kt)("h2",{id:"hello-world"},"Hello World"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// src/components/Hello.tsx\nimport * as React from 'react'\nexport interface Props{\n  name:string\n  enthusiasmLevel?:number\n}\nfunction Hello({name,enthusiasmLevel=1}:Props){\n  if(enthusiasmLevel <=0){\n    throw new Error('you should have a talk with your friends')\n  }\n  return (\n  <div className=\"hello\">\n    <div className=\"greeting\">\n      Hello{name+getExclamationMarks(enthusiasmLevel)}\n      </div>\n    </div>\n  )\n}\nfunction getExclamationMarks(numChars:number){\n  return Array(numChars + 1).join('!')\n}\n")))}d.isMDXComponent=!0}}]);