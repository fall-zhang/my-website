"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9454],{9613:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var l=n(9496);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},o=Object.keys(e);for(l=0;l<o.length;l++)n=o[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)n=o[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=l.createContext({}),i=function(e){var t=l.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=i(e.components);return l.createElement(p.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},u=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=i(n),u=a,k=m["".concat(p,".").concat(u)]||m[u]||d[u]||o;return n?l.createElement(k,r(r({ref:t},c),{},{components:n})):l.createElement(k,r({ref:t},c))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[m]="string"==typeof e?e:a,r[1]=s;for(var i=2;i<o;i++)r[i]=n[i];return l.createElement.apply(null,r)}return l.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5344:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>i});var l=n(8028),a=(n(9496),n(9613));const o={sidebar_position:40},r=void 0,s={unversionedId:"JavaScript & TypeScript/3.3-WebComponent",id:"JavaScript & TypeScript/3.3-WebComponent",title:"3.3-WebComponent",description:"Create by fall on 17 Oct 2021",source:"@site/my-docs/JavaScript & TypeScript/3.3-WebComponent.md",sourceDirName:"JavaScript & TypeScript",slug:"/JavaScript & TypeScript/3.3-WebComponent",permalink:"/my-website/docs/JavaScript & TypeScript/3.3-WebComponent",draft:!1,editUrl:"https://github.com/my-docs/JavaScript & TypeScript/3.3-WebComponent.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{sidebar_position:40},sidebar:"tutorialSidebar",previous:{title:"3.4-canvas",permalink:"/my-website/docs/JavaScript & TypeScript/3.4-canvas"},next:{title:"6-WebAssembly",permalink:"/my-website/docs/JavaScript & TypeScript/6-WebAssembly"}},p={},i=[{value:"Web Component",id:"web-component",level:2},{value:"\u5bf9\u6bd4\u6846\u67b6",id:"\u5bf9\u6bd4\u6846\u67b6",level:3},{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:3},{value:"\u72b6\u6001\u7ba1\u7406",id:"\u72b6\u6001\u7ba1\u7406",level:3},{value:"\u81ea\u5b9a\u4e49\u65b9\u6cd5",id:"\u81ea\u5b9a\u4e49\u65b9\u6cd5",level:3},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6",level:3},{value:"\u751f\u547d\u5468\u671f",id:"\u751f\u547d\u5468\u671f",level:3},{value:"Shadow DOM",id:"shadow-dom",level:3},{value:"\u6837\u5f0f",id:"\u6837\u5f0f",level:3},{value:"\u63d2\u69fd",id:"\u63d2\u69fd",level:3},{value:"API",id:"api",level:2},{value:"customElements",id:"customelements",level:3},{value:"shadowRoot",id:"shadowroot",level:3},{value:"\u8fdb\u9636\u4f7f\u7528",id:"\u8fdb\u9636\u4f7f\u7528",level:2},{value:"\u6a21\u677f\u5143\u7d20",id:"\u6a21\u677f\u5143\u7d20",level:3},{value:"\u6269\u5c55\u539f\u751f\u5143\u7d20",id:"\u6269\u5c55\u539f\u751f\u5143\u7d20",level:3},{value:"\u5c01\u88c5",id:"\u5c01\u88c5",level:3},{value:"\u81ea\u5b9a\u4e49\u6309\u94ae",id:"\u81ea\u5b9a\u4e49\u6309\u94ae",level:4},{value:"\u56fe\u7247\u61d2\u52a0\u8f7d",id:"\u56fe\u7247\u61d2\u52a0\u8f7d",level:4},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5",level:3},{value:"\u53c2\u8003\u6587\u7ae0",id:"\u53c2\u8003\u6587\u7ae0",level:2}],c={toc:i},m="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(m,(0,l.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Create by ",(0,a.kt)("strong",{parentName:"p"},"fall")," on 17 Oct 2021\nRecently revised in 06 May 2023")),(0,a.kt)("h2",{id:"web-component"},"Web Component"),(0,a.kt)("p",null,"Web Component \u610f\u4e3a Web \u7ec4\u4ef6\u7cfb\u7edf\uff0c\u4f7f\u7528 JS \u521b\u5efa\u548c React\u3001Vue \u7684\u7ec4\u4ef6\u7c7b\u4f3c\u53ef\u590d\u7528\u7684\u7ec4\u4ef6\u3002\u5b9e\u73b0\u6bd4\u5982\u751f\u547d\u5468\u671f\uff0cCSS \u6837\u5f0f\u9694\u79bb\uff0c\u7ec4\u5408\u7ee7\u627f\u7b49\u65b9\u6cd5\u3002\u5e76\u4e14\u53ef\u4ee5\u521b\u9020\u4e00\u4e2a\u7528\u6237\u5b9a\u5236\u7684 HTML \u6807\u7b7e\uff0c\u62e5\u6709 HTML \u5143\u7d20\u7684\u6240\u6709\u5c5e\u6027\uff0c\u53ef\u4ee5\u5728\u4efb\u4f55\u652f\u6301\u7684\u6d4f\u89c8\u5668\u4e2d\u901a\u8fc7\u5f15\u5165\u8fd9\u4e9b\u811a\u672c\uff0c\u5c31\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e9b\u7ec4\u4ef6\u3002"),(0,a.kt)("p",null,"Web Components \u7531\u4e09\u9879\u4e3b\u8981\u6280\u672f\u7ec4\u6210\uff0c\u5b83\u4eec\u53ef\u4ee5\u4e00\u8d77\u4f7f\u7528\u6765\u521b\u5efa\u5c01\u88c5\u529f\u80fd\u7684\u5b9a\u5236\u5143\u7d20\uff0c\u8fd9\u4e9b\u5143\u7d20\u53ef\u4ee5\u5728\u4f60\u559c\u6b22\u7684\u4efb\u4f55\u5730\u65b9\u91cd\u7528\uff0c\u4e0d\u5fc5\u62c5\u5fc3\u4ee3\u7801\u51b2\u7a81\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Custom element\uff08\u81ea\u5b9a\u4e49\u5143\u7d20\uff09"),"\uff1a\u4e00\u7ec4 JavaScript API\uff0c\u5141\u8bb8\u60a8\u81ea\u5b9a\u4e49\u5143\u7d20\u53ca\u5176\u884c\u4e3a\uff08\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"li"},"<my-component>"),"\uff09\uff0c\u7136\u540e\u53ef\u4ee5\u5728\u60a8\u7684\u7528\u6237\u754c\u9762\u4e2d\u6309\u7167\u9700\u8981\u4f7f\u7528\u5b83\u4eec\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Shadow DOM\uff08\u5f71\u5b50 DOM\uff09"),"\uff1a\u4e00\u7ec4 JavaScript API\uff0c\u5141\u8bb8\u5143\u7d20\u7684\u529f\u80fd\u79c1\u6709\uff08\u9694\u79bb DOM \u548c CSS \u6837\u5f0f\uff09\u901a\u8fc7\u5c06\u5c01\u88c5\u7684\u201c\u5f71\u5b50\u201dDOM \u6811\u9644\u52a0\u5230\u5143\u7d20\uff08\u5355\u72ec\u7684 DOM \u4f5c\u7528\u57df\uff09\u8fdb\u884c\u63a7\u5236\u5176\u5173\u8054\u7684\u529f\u80fd\u3002\u8fd9\u6837\u5b83\u4eec\u5c31\u53ef\u4ee5\u88ab\u811a\u672c\u5316\u548c\u6837\u5f0f\u5316\uff0c\u800c\u4e0d\u7528\u62c5\u5fc3\u4e0e\u6587\u6863\u7684\u5176\u4ed6\u90e8\u5206\u53d1\u751f\u51b2\u7a81\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"HTML template\uff08HTML \u6a21\u677f\uff09\uff1a")," ",(0,a.kt)("inlineCode",{parentName:"li"},"<template>")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"<slot>")," \u5143\u7d20\u4f7f\u60a8\u53ef\u4ee5\u7f16\u5199\u4e0d\u5728\u9875\u9762\u4e2d\u663e\u793a\u7684\u6807\u8bb0\u6a21\u677f\u3002\u7136\u540e\u5b83\u4eec\u53ef\u4ee5\u4f5c\u4e3a\u81ea\u5b9a\u4e49\u5143\u7d20\u7ed3\u6784\u7684\u57fa\u7840\u88ab\u591a\u6b21\u91cd\u7528\u3002")),(0,a.kt)("h3",{id:"\u5bf9\u6bd4\u6846\u67b6"},"\u5bf9\u6bd4\u6846\u67b6"),(0,a.kt)("p",null,"\u76ee\u524d\u7684\u524d\u7aef\u6846\u67b6\u5177\u6709\u6570\u636e\u7ed1\u5b9a\u3001\u72b6\u6001\u7ba1\u7406\u548c\u76f8\u5f53\u6807\u51c6\u5316\u7684\u4ee3\u7801\u5e93\u7b49\u529f\u80fd\u6240\u5e26\u6765\u7684\u989d\u5916\u4ef7\u503c\u3002\u4ee5\u53ca\u4f7f\u7528\u4e60\u60ef\u3002"),(0,a.kt)("p",null,"\u6846\u67b6\u7684\u6570\u636e\u7ed1\u5b9a\u4f1a\u66f4\u65b9\u4fbf\uff0c\u5728 Web Component \u4e2d\uff0c\u4e5f\u5141\u8bb8\u76f4\u63a5\u7528\u6570\u636e\u6765\u8bbe\u7f6e web component \u7684\u5c5e\u6027\u3002\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7 attributeChangedCallback \u6765\u76d1\u542c\u8fd9\u4e9b\u5c5e\u6027\u7684\u6539\u53d8\u3002\u524d\u7aef\u6846\u67b6\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6807\u51c6\u7684\u4ee3\u7801\u57fa\u51c6\uff0c\u53ef\u4ee5\u4f7f\u56e2\u961f\u4e2d\u7684\u6bcf\u4e00\u4e2a\u65b0\u4eba\u4ece\u4e00\u5f00\u59cb\u5c31\u719f\u6089\u8fd9\u4e9b\u4ee3\u7801\u57fa\u51c6\u3002"),(0,a.kt)("p",null,"\u73b0\u5728 web component \u5df2\u7ecf\u5f97\u5230\u4e86\u5e7f\u6cdb\u7684\u652f\u6301\uff0c\u53ef\u4ee5\u4e0e\u6846\u67b6\u4e00\u8f83\u9ad8\u4e0b\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e0d\u9700\u8981\u6846\u67b6"),(0,a.kt)("li",{parentName:"ul"},"\u6027\u80fd\u66f4\u597d\uff0c\u751f\u6210\u4ee3\u7801\u66f4\u5c11"),(0,a.kt)("li",{parentName:"ul"},"\u6613\u4e8e\u7ee7\u627f\uff0c\u4e0d\u9700\u8981\u7f16\u8bd1"),(0,a.kt)("li",{parentName:"ul"},"\u771f\u6b63\u7684\u5c40\u90e8 CSS \u4f5c\u7528\u57df\uff08Shadow DOM\uff09"),(0,a.kt)("li",{parentName:"ul"},"\u53ea\u6709 HTML\uff0cCSS\uff0cJavaScript")),(0,a.kt)("p",null,"\u4f46\uff0c\u6846\u67b6\u548c Web Component \u4e0d\u4e00\u5b9a\u53ea\u6709\u5bf9\u7acb\uff0c\u80af\u5b9a\u662f\u76f8\u4e92\u878d\u5408\uff0c\u6700\u7ec8\u5448\u73b0\u51fa\u66f4\u7e41\u8363\u7684\u751f\u6001\u73af\u5883\u3002"),(0,a.kt)("h2",{id:"\u57fa\u672c\u4f7f\u7528"},"\u57fa\u672c\u4f7f\u7528"),(0,a.kt)("h3",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,a.kt)("p",null,"\u521b\u5efa\u6a21\u677f\uff0c\u8be5\u5185\u5bb9\u653e\u7f6e\u5728 index.html \u7684 body \u6807\u7b7e\u5185"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<template id="span-group" >\n  <span>\u6ca1\u4ec0\u4e48\u7684\uff0c\u5bf9\u5427\uff1f</span>\n</template>\n')),(0,a.kt)("p",null,"\u6dfb\u52a0\u8be5\u811a\u672c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"window.onload = function () {\n  class MyElement extends HTMLElement {\n    // \u5f53\u5143\u7d20\u88ab\u521b\u5efa\u65f6\uff0c\u4f1a\u8c03\u7528 constrcutor \u51fd\u6570\uff0c\u66f4\u591a\u5185\u5bb9\u8bf7\u67e5\u770b\u751f\u547d\u5468\u671f\n    constructor() {\n      // \u5fc5\u987b\u9996\u5148\u8c03\u7528 super \u65b9\u6cd5\n      super()\n      // \u5143\u7d20\u7684\u529f\u80fd\u4ee3\u7801\u5199\u5728\u8fd9\u91cc\n      const dom = document.querySelector('#span-group')\n      const content = dom.content.cloneNode(true) // \u4f7f\u7528\u6a21\u677f\u7684\u514b\u9686\uff0c\u5176\u4ed6\u4f4d\u7f6e\u5f15\u7528\u65f6\u4e0d\u4f1a\u76f8\u4e92\u5f71\u54cd\n      const text = this.getAttribute('text') // \u83b7\u53d6\u5f53\u524d\u7ec4\u4ef6\u4e0a\u7684 text \u5c5e\u6027\n      content.querySelector('span').innerText = text\n      this.appendChild(content) // \u5728\u5f53\u524d DOM(MyElement) \u4e2d\u63d2\u5165\u8fd9\u4e9b\u5185\u5bb9\n    }\n  }\n  // \u6700\u540e\u5411 html \u4e2d\u6ce8\u518c\u7ec4\u4ef6\n  // \u4e3a\u4e86\u907f\u514d\u548c native \u7684\u6807\u7b7e\u51b2\u7a81\uff0c\u5fc5\u987b\u7528 `-` \u8fdb\u884c\u94fe\u63a5\n  customElements.define('my-component', MyElement) // \u5206\u522b\u8f93\u5165\u60f3\u5728 dom \u4e2d\u4f7f\u7528\u7684\u540d\u79f0\u548c\u5bf9\u5e94\u7684\u7c7b\n}\n")),(0,a.kt)("p",null,"\u4f7f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<my-component></my-component>\n<my-component text="\u6709\u95ee\u9898\u554a"></my-component>\n<my-component text="\u6ca1\u6709\u95ee\u9898\u554a"></my-component>\n<my-component></my-component>\n')),(0,a.kt)("h3",{id:"\u72b6\u6001\u7ba1\u7406"},"\u72b6\u6001\u7ba1\u7406"),(0,a.kt)("p",null,"\u6570\u636e\u76d1\u542c\u548c\u4e8b\u4ef6\u89e6\u53d1"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class MyElement extends HTMLElement{\n  // \u5b9a\u4e49\u88ab\u76d1\u89c6\u7684\u5c5e\u6027\n  static get observedAttributes(){\n    return ['foo', 'bar'] // \u8fd9\u4e9b\u5c5e\u6027\u90fd\u5728 \u6807\u7b7e\u4e0a\u88ab\u8c03\u7528\n  }\n  attributeChangedCallback(attr, oldVal, newVal){\n    // \u6bcf\u5f53\u5c06\u5c5e\u6027\u6dfb\u52a0\u5230 observedAttributes \u7684\u6570\u7ec4\u4e2d\u65f6\n    switch(attr){\n      case 'foo': \n        console.log('foo changed, new value is',newVal)\n        break;\n      case 'bar':\n    }\n  }\n}\n")),(0,a.kt)("p",null,"\u7ed9\u6bcf\u4e00\u4e2a\u9700\u8981\u88ab\u76d1\u542c\u7684\u5c5e\u6027\u6dfb\u52a0get\u51fd\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"get text () {\n  return this.getAttribute('text');\n}\n")),(0,a.kt)("p",null,"\u518d\u5b9a\u4e49\u5c5e\u6027\u7684set\u51fd\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"set text (value) {\n  this.setAttribute('text', value);\n}\n")),(0,a.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u5c31\u80fd\u76f4\u63a5\u7ed9\u7ec4\u4ef6\u5bf9\u8c61\u5b9a\u4e49\u5c5e\u6027\u5e76\u8d4b\u503c\uff0c\u800c\u4e0d\u9700\u8981\u5b9a\u4e49\u5728\u7ec4\u4ef6DOM\u5143\u7d20\u4e0a\u3002\u5982\u4e0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const mybutton = document.querySelector('my-button');\nmybutton.text = 'Hi!';\n")),(0,a.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u65b9\u6cd5"},"\u81ea\u5b9a\u4e49\u65b9\u6cd5"),(0,a.kt)("p",null,"\u5728\u4f60\u7684\u5143\u7d20\u4e0a\u5b9a\u4e49\u7684\u4efb\u4f55\u65b9\u6cd5\uff0c\u90fd\u4f1a\u6210\u4e3a\u5176\u516c\u5171 JavaScript \u7684\u4e00\u90e8\u5206\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class MyElement extends HTMLElement {\n  // ...\n  doSomething() {\n    // do something in this method\n  }\n}\nconst element = document.querySelector('my-element');\nelement.doSomething();\n")),(0,a.kt)("h3",{id:"\u4e8b\u4ef6"},"\u4e8b\u4ef6"),(0,a.kt)("p",null,"\u81ea\u5b9a\u4e49\u5143\u7d20\u7684\u6807\u51c6\u4e8b\u4ef6\uff08\u5982\u9f20\u6807\u548c\u952e\u76d8\u4e8b\u4ef6\uff09\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5c06\u4f1a\u4ece Shadow DOM \u4e2d\u5192\u6ce1\uff0c\u4e8b\u4ef6\u7684 target \u5c5e\u6027\u8fd8\u662f\u4f1a\u6307\u5411\u81ea\u5b9a\u4e49\u5143\u7d20\u672c\u8eab\u3002\u5982\u679c\u4f60\u60f3\u627e\u51fa\u4e8b\u4ef6\u5b9e\u9645\u6765\u81ea Shadow  DOM \u4e2d\u7684\u54ea\u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"event.composedPath()")," \u6765\u68c0\u7d22\u4e8b\u4ef6\u7ecf\u8fc7\u7684\u8282\u70b9\u6570\u7ec4\u3002"),(0,a.kt)("p",null,"\u6709\u4e24\u79cd\u53d1\u9001\u65b9\u5f0f"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u4e0a\u6dfb\u52a0\u81ea\u5b9a\u4e49\u65b9\u6cd5\u76d1\u542c DOM \u5143\u7d20\u4e8b\u4ef6\uff0c\u5728\u9700\u8981\u7684\u5730\u65b9\u8c03\u7528\u7ec4\u4ef6\u7684\u81ea\u5b9a\u4e49\u65b9\u6cd5"),(0,a.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u4f7f\u7528 CustomEvent \u4ece\u81ea\u5b9a\u4e49\u5143\u7d20\u4e2d\u629b\u51fa\u4efb\u4f55\u4f60\u60f3\u8981\u7684\u4e8b\u4ef6\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class MyButton extends HTMLElement{\n  constructor(){\n    super() // \u540c react \u90fd\u9700\u8981\u5728\u6700\u5f00\u59cb\u8c03\u7528 super\n    const template = document.getElementById('my_button')\n    const content = template.content.cloneNode(true)\n    const button = content.querySelector(\"#btn\")\n    button.innerText = this.getAttributes('text')\n    // button \u88ab\u70b9\u51fb\u65f6\uff0c\u89e6\u53d1\u70b9\u51fb\u4e8b\u4ef6\n    button.addEventListener('click',ev=>{\n      // \u628a\u70b9\u51fb\u4e8b\u4ef6\u6302\u8f7d\u5230\u8be5\u7ec4\u4ef6\u4e0a\uff0c\u70b9\u51fb\u65f6\u5411\u5916\u4f20\u9012\u53c2\u6570\n      this.onClick('f,m,l')\n      // \u56e0\u4e3a HTMLElement \u540c\u6837\u7ee7\u627f\u4e86 EventTarget\uff0c\u6240\u4ee5\u4e5f\u6709 dispatchEvent \u65b9\u6cd5\n      // this.dispatchEvent(\n      //   new CustomEvent('onClick', {\n      //     detail: 'Hello'\n      //   })\n      // )\n    })\n  }\n  connectedCallback() {\n    this.dispatchEvent(new CustomEvent('custom', {\n      detail: {message: 'a custom event'}\n    }));\n  }\n}\n// \u5728\u9700\u8981\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7ec4\u4ef6\u7684\u81ea\u5b9a\u4e49\u65b9\u6cd5\ndocument.querySelector('my-button').onClick = value => {\n  console.log(value)\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class MyElement extends HTMLElement {\n  // ...\n  \n}\n// on the outside\ndocument.querySelector('my-element').addEventListener('custom', e => console.log('message from event:', e.detail.message));\n")),(0,a.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u4e8b\u4ef6\u4ece Shadow DOM \u7684\u8282\u70b9\u629b\u51fa\u800c\u4e0d\u662f\u81ea\u5b9a\u4e49\u5143\u7d20\u672c\u8eab\uff0c\u9ed8\u8ba4\u4e0d\u4f1a\u4ece ShadowDOM \u4e0a\u5192\u6ce1\uff0c\u9664\u975e\u5b83\u4f7f\u7528\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"composition: true"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class MyElement extends HTMLElement {\n  // ...\n  connectedCallback() {\n    this.container = this.shadowRoot.querySelector('#container');\n    // dispatchEvent is now called on this.container instead of this\n    this.container.dispatchEvent(new CustomEvent('custom', {\n      detail: {message: 'a custom event'},\n      composed: true  // without composed: true this event will not bubble out of Shadow DOM\n    }));\n  }\n}\n")),(0,a.kt)("h3",{id:"\u751f\u547d\u5468\u671f"},"\u751f\u547d\u5468\u671f"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u751f\u547d\u5468\u671f\u6267\u884c\u987a\u5e8f")),(0,a.kt)("p",null,"\u7c7b\u8fdb\u884c\u521b\u5efa\u7684\u65f6\u5019\uff0c\u6267\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"constructor")),(0,a.kt)("p",null,"\u5f53\u5143\u7d20\u88ab\u63d2\u5165 DOM \u65f6\uff0c\u4f1a\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"connectCallback")),(0,a.kt)("p",null,"\u4ece\u6587\u6863\u4e2d\u5220\u9664\u65f6\u6267\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"disconnectedCallback"),"\uff0c\u5728\u5173\u95ed\u6d4f\u89c8\u5668\u65f6\u4e0d\u4f1a\u8c03\u7528"),(0,a.kt)("p",null,"\u5f53web component\u88ab\u79fb\u52a8\u5230\u65b0\u6587\u6863\u65f6\u6267\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"adoptedCallback"),"\u3002"),(0,a.kt)("p",null,"\u88ab\u76d1\u542c\u7684\u5c5e\u6027\u53d1\u751f\u53d8\u5316\u65f6\u6267\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"attributeChangedCallback")," "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"constructor -> attributeChangedCallback -> connectedCallback -> disconnectedCallback\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u751f\u547d\u5468\u671f\u56de\u8c03")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class myElement extends HTMLElement{\n  adoptedCallback(){\n    // \u5f53\u5143\u7d20\u901a\u8fc7\u8c03\u7528 document.adoptNode(element) \u88ab\u91c7\u7528\u5230\u6587\u6863\u65f6\u5c06\u4f1a\u88ab\u8c03\u7528\n  }\n  static observedAttributes(){ // \u88ab\u76d1\u89c6\u7684\u5c5e\u6027\n    return ['foo', 'bar'] // \u8fd9\u4e9b\u5c5e\u6027\u90fd\u5728 \u6807\u7b7e\u4e0a\u88ab\u8c03\u7528\n  }\n  attributeChangedCallback(attr, oldVal, newVal){\n    // \u6bcf\u5f53\u5c06\u5c5e\u6027\u6dfb\u52a0\u5230 observedAttributes \u7684\u6570\u7ec4\u4e2d\u65f6\n    switch(attr){\n      case 'foo': \n        break;\n      case 'bar':\n    }\n  }\n  connectCallback(){\n    // \u5f53\u8fd9\u4e2a\u5143\u7d20\u88ab\u63d2\u5165DOM\u6811\u7684\u65f6\u5019\u5c06\u4f1a\u89e6\u53d1\u5f53\u524d\u65b9\u6cd5\n    // \u5bf9\u5143\u7d20\u8fdb\u884c\u8bbe\u7f6e\n    // \u6b64\u65f6\u53ef\u4ee5\u786e\u5b9a\u6240\u6709\u7684\u5c5e\u6027\u548c\u5b50\u5143\u7d20\u90fd\u5df2\u7ecf\u53ef\u7528\u7684\u529e\u6cd5\n  }\n  disconnectCallback(){\n    // \u5f53\u5143\u7d20\u4eceDOM\u4e2d\u88ab\u79fb\u9664\u7684\u65f6\u5019\uff0c\u4f1a\u88ab\u8c03\u7528\n  }\n}\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u7406\u8bba\u4e0a\u901a\u8fc7\u5e8f\u5217\u5316\u53ef\u4ee5\u5c06\u590d\u6742\u503c\u4f20\u9012\u7ed9\u5c5e\u6027\uff0c\u4f46\u662f\u8fd9\u6837\u4f1a\u5f71\u54cd\u6027\u80fd\uff0c\u5e76\u4e14\u4f60\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u7ec4\u4ef6\u7684\u65b9\u6cd5\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u8fd9\u6837\u505a\u3002")),(0,a.kt)("p",null,"attributeChangedCallback \u8981\u5728 connectedCallback \u4e4b\u524d\u6267\u884c"),(0,a.kt)("p",null,"\u56e0\u4e3a web \u7ec4\u4ef6\u4e0a\u7684\u5c5e\u6027\uff0c\u88ab\u63d2\u5165DOM\u524d\u5c31\u5e94\u8be5\u521d\u59cb\u5316\u914d\u7f6e\u4e86\u3002\u56e0\u6b64 attributeChangedCallback \u8981\u5728 connectedCallback \u4e4b\u524d\u6267\u884c\u3002 \u8fd9\u610f\u5473\u7740\u4f60\u9700\u8981\u6839\u636e\u67d0\u4e9b\u5c5e\u6027\u7684\u503c\uff0c\u5728 Shadow  DOM \u4e2d\u914d\u7f6e\u8282\u70b9\uff0c\u90a3\u4e48\u4f60\u9700\u8981\u5728\u6784\u9020\u51fd\u6570\u4e2d\u5f15\u7528\u8fd9\u4e9b\u8282\u70b9\uff0c\u800c\u4e0d\u662f\u5728 connectedCallback \u4e2d\u5f15\u7528\u5b83\u4eec\u3002"),(0,a.kt)("h3",{id:"shadow-dom"},"Shadow DOM"),(0,a.kt)("p",null,"Shadow DOM\uff0c\u53ef\u4ee5\u5c06\u81ea\u5b9a\u4e49\u5143\u7d20\u7684 HTML \u548c CSS \u5b8c\u5168\u5c01\u88c5\u5728\u7ec4\u4ef6\u5185\u3002\u6574\u4e2a\u81ea\u5b9a\u4e49\u5185\u5bb9\u5c06\u4ee5\u5355\u4e2a\u7684 HTML \u6807\u7b7e\u51fa\u73b0\u5728\u6587\u6863\u7684 DOM \u6811\u4e2d\uff08\u4e0d\u7528\u518d\u62c5\u5fc3\u5185\u90e8 id \u7684\u51b2\u7a81\uff09\u3002\u5185\u90e8\u7684\u5143\u7d20\u5c06\u59cb\u7ec8\u4e0d\u4f1a\u5f71\u54cd\u5230\u5b83\u5916\u90e8\u7684\u5143\u7d20\uff08\u9664\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},":focus-within"),"\uff09\u3002"),(0,a.kt)("p",null,"\u6bd4\u5982\u7f51\u9875\u4e2d\u539f\u751f\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"<video>")," \u5143\u7d20\u4e5f\u4f7f\u7528\u4e86 Shadow DOM\u3002\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u6807\u7b7e\u4f7f\u7528\uff0c\u56e0\u4e3a\u5728\u5b83\u7684 Shadow DOM \u4e2d\uff0c\u5305\u542b\u4e86\u4e00\u7cfb\u5217\u7684\u6309\u94ae\u548c\u5176\u4ed6\u63a7\u5236\u5668\uff0c\u6240\u4ee5\u80fd\u591f\u62e5\u6709\u64ad\u653e\u548c\u6682\u505c\u89c6\u9891\u7684\u63a7\u4ef6\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"}," \u8981\u5728 Chrome \u4e2d\u663e\u793a Shadow DOM\uff0c\u8fdb\u5165\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u7684 Preferences \u4e2d\uff0c\u9009\u4e2d Show user agent Shadow DOM\u3002\u4f60\u5c31\u53ef\u4ee5\u770b\u5230\u8be5\u5143\u7d20\u7684 Shadow DOM\u4e86\u3002")),(0,a.kt)("p",null,"\u4e00\u4e9b\u7279\u6709\u7684\u672f\u8bed\u9700\u8981\u4e86\u89e3"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Shadow host\uff1a\u5e38\u89c4 DOM \u8282\u70b9\uff0cShadow DOM \u4f1a\u88ab\u9644\u52a0\u5230\u8fd9\u4e2a\u8282\u70b9\u4e0a\u3002"),(0,a.kt)("li",{parentName:"ul"},"Shadow tree\uff1aShadow DOM \u5185\u90e8\u7684 DOM \u7ed3\u6784"),(0,a.kt)("li",{parentName:"ul"},"Shadow boundary\uff1aShadow DOM \u7ed3\u675f\u7684\u5730\u65b9\uff0c\u4e5f\u662f\u5e38\u89c4 DOM \u5f00\u59cb\u7684\u5730\u65b9"),(0,a.kt)("li",{parentName:"ul"},"Shadow root\uff1aShadow tree \u7684\u6839\u8282\u70b9")),(0,a.kt)("p",null,"\u5f00\u542f Shadow DOM"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class MyElement extends HTMLElement {\n  // \u5f53\u5143\u7d20\u88ab\u521b\u5efa\u65f6\uff0c\u4f1a\u8c03\u7528 constrcutor \u51fd\u6570\uff0c\u66f4\u591a\u5185\u5bb9\u8bf7\u67e5\u770b\u751f\u547d\u5468\u671f\n  constructor() {\n    // \u5fc5\u987b\u5148\u8c03\u7528 super()\n    super()\n    const template = document.querySelector('template#span-group')\n    const content = template.content.cloneNode(true) // \u4f7f\u7528\u6a21\u677f\u7684\u514b\u9686\uff0c\u5176\u4ed6\u4f4d\u7f6e\u5f15\u7528\u65f6\u4e0d\u4f1a\u76f8\u4e92\u5f71\u54cd\n    // \u83b7\u53d6 shadowRoot\n    const shadowRoot = this.attachShadow({ mode: \"open\" });\n    // \u5728 shadow DOM \u4e2d\u63d2\u5165\u5185\u5bb9\uff0c\u63d2\u5165\u7684\u5185\u5bb9\u4f1a\u5e94\u7528\u63d2\u69fd\n    shadowRoot.appendChild(content)\n    // \u901a\u8fc7 shadowRoot \u53bb\u67e5\u627e\u5143\u7d20\n    shadowRoot.querySelector('.pink')\n  }\n}\n")),(0,a.kt)("h3",{id:"\u6837\u5f0f"},"\u6837\u5f0f"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u6837\u5f0f\u9700\u8981\u642d\u914d Shadow DOM \u5b9e\u73b0\u6837\u5f0f\u9694\u79bb\uff0c\u4f7f\u7ec4\u4ef6\u5185\u6240\u6709\u7684 CSS \u90fd\u53ea\u5e94\u7528\u4e8e\u7ec4\u4ef6\u672c\u8eab\u3002")),(0,a.kt)("p",null,"\u53ef\u4ee5\u5c06\u6837\u5f0f\u4e66\u5199\u5728 template \u4e2d\uff0c\u4ee5\u4fdd\u8bc1\u6837\u5f0f\u4ec5\u5e94\u7528\u4e8e button \u4e0a\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const shadowRoot = this.attachShadow({mode: 'open'});\nshadowRoot.innerHTML = `<p>Hello world</p>`;\n")),(0,a.kt)("p",null,"\u8fd9\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5e26 mode: open \u7684 Shadow root\uff0c\u8fd9\u610f\u5473\u7740\u53ef\u4ee5\u518d\u5f00\u53d1\u8005\u5de5\u5177\u627e\u5230\u5b83\u5e76\u4e0e\u4e4b\u4ea4\u4e92\uff0c\u914d\u7f6e\u66b4\u9732\u51fa\u7684 CSS \u5c5e\u6027\uff0c\u76d1\u542c\u629b\u51fa\u7684\u4e8b\u4ef6\u3002\u540c\u6837\u4e5f\u53ef\u4ee5\u5b9a\u4e49 mode\uff1aclosed\uff0c\u4f1a\u5f97\u5230\u4e0e\u4e4b\u76f8\u53cd\u7684\u8868\u73b0\u3002"),(0,a.kt)("p",null,"\u81ea\u5b9a\u4e49\u5143\u7d20\u9ed8\u8ba4\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"display:inline"),"\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},":host")," \u9009\u62e9\u5668\u5bf9\u7ec4\u4ef6\u672c\u8eab\u8fdb\u884c\u6837\u5f0f\u8bbe\u7f6e\u3002\u4f46\u662f\uff0c\u4ece\u5916\u90e8\u5b9a\u4e49\u5728\u7ec4\u4ef6\u672c\u8eab\u7684\u6837\u5f0f\u4f18\u5148\u4e8e\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},":host")," \u6837\u5f0f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<template id="mybutton">\n  <style>\n    :host {\n      display: block;\n    }\n    button {\n      color:blue;\n      border: 0;\n      border-radius: 5px;\n      background-color: brown;\n    }\n  </style>\n  <button id="btn">My Button</button>\n</template>\n')),(0,a.kt)("p",null,"\u6837\u5f0f\u4e5f\u652f\u6301\u6807\u7b7e\u7684\u5199\u6cd5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scss"},"// \u8be5\u6837\u5f0f\u4f1a\u8986\u76d6 Shadow DOM \u4e2d\u5b9a\u4e49\u7684 :host\nmy-element {\n  display: inline-block;\n}\n// \u5f53\u7136\u4e5f\u5141\u8bb8\u4f60\u6839\u636e\u4e0a\u4e0b\u6587\u7684\u6837\u5f0f\u5316\u3002\n// \u901a\u8fc7 disabled \u7684 attribute \u6765\u6539\u53d8\u7ec4\u4ef6\u7684\u80cc\u666f\u662f\u5426\u4e3a\u7070\u8272\n:host([disabled]) {\n  opacity: 0.5;\n}\n// \u81ea\u5b9a\u4e49\u5143\u7d20\u4f1a\u4ece\u5468\u56f4\u7684 CSS \u4e2d\u7ee7\u627f\u4e00\u4e9b\u5c5e\u6027\uff0c\u4f8b\u5982\u989c\u8272\u548c\u5b57\u4f53\u7b49\n// \u5982\u679c\u60f3\u6e05\u7a7a\u7ec4\u4ef6\u7684\u521d\u59cb\u72b6\u6001\u5e76\u4e14\u5c06\u7ec4\u4ef6\u5185\u7684\u6240\u6709 CSS \u90fd\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u7684\u521d\u59cb\u503c\uff0c\u4f7f\u7528\uff1a\n:host {\n  all: initial;\n}\n")),(0,a.kt)("p",null,"\u6837\u5f0f\u4e00\u822c\u901a\u8fc7\u66b4\u9732\u4e00\u4e2a\u53d8\u91cf\u540d\u79f0\uff0c\u8ba9\u7528\u6237\u901a\u8fc7 DOM \u4e0a\u7684\u8282\u70b9\u53bb\u81ea\u5b9a\u4e49\u8fd9\u4e2a\u6837\u5f0f\uff0c\u4e0d\u5e94\u8be5\u5728\u5916\u90e8\u8fdb\u884c\u66f4\u6539\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scss"},"// \u6bd4\u5982\uff0c\u4f60\u8bbe\u7f6e\u9ed8\u8ba4\u80cc\u666f\u989c\u8272\u4e3a #ffffff\n:host {\n  --background-color: #ffffff;\n}\n// \u73b0\u5728\u7528\u6237\u53ef\u4ee5\u5728\u7ec4\u4ef6\u7684\u5916\u90e8\u8bbe\u7f6e\u5b83\u7684\u80cc\u666f\u989c\u8272\n// \u5047\u8bbe shadow dom \u4e2d\u6709\u4e00\u4e2a\u8282\u70b9\u4e3a div#container\n#container {\n  background-color: var(--background-color);\n}\n// \u4e5f\u53ef\u4ee5\u901a\u8fc7\u6807\u7b7e\u8fdb\u884c\u4fee\u6539\nmy-element {\n  --background-color: #00cc00;\n}\n")),(0,a.kt)("p",null,"\u901a\u8fc7\u63d0\u4f9b\u5c40\u90e8\u7684 CSS\u3001HTML\uff0cShadow DOM \u5c06\u6807\u8bb0\u548c\u6837\u5f0f\u6346\u7ed1\u5230\u81ea\u5df1\u7684\u7ec4\u4ef6\u5185\uff0c\u800c\u4e0d\u9700\u8981\u4efb\u4f55\u5de5\u5177\u548c\u547d\u540d\u7ea6\u5b9a\u3002\u4f60\u518d\u4e5f\u4e0d\u7528\u62c5\u5fc3\u65b0\u7684 class \u6216 id \u4f1a\u4e0e\u73b0\u6709\u7684\u4efb\u4f55\u4e00\u4e2a\u51b2\u7a81\u3002"),(0,a.kt)("p",null,"\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7 CSS \u53d8\u91cf\u8bbe\u7f6e web \u7ec4\u4ef6\u7684\u5185\u90e8\u6837\u5f0f\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u63d2\u69fd\u5c06 HTML \u6ce8\u5165\u5230 Web Components\u4e2d\u3002"),(0,a.kt)("h3",{id:"\u63d2\u69fd"},"\u63d2\u69fd"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u63d2\u69fd\u9700\u8981\u642d\u914d Shadow DOM \u624d\u80fd\u5b9e\u73b0\u63d2\u5165\u5bf9\u5e94\u7684\u4f4d\u7f6e")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<slot>"),"\uff08\u63d2\u69fd\uff09\uff0c\u5c06\u4f7f\u7528 Web Components \u7684\u5305\u88f9\u7684\u5185\u5bb9\u6dfb\u52a0\u5230\u7ec4\u4ef6\u5185\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<template id="span-group">\n  <span>\u6587\u6863\u9ed8\u8ba4\u5185\u5bb9\uff0c\u5bf9\u5427\uff1f</span>\n  <p>\n    \x3c!-- \u521b\u5efa\u4e00\u4e2a\u63d2\u69fd\uff0c\u4f1a\u5c06 name \u4e3a my-text \u7684\u5185\u5bb9\u5c55\u793a\u51fa\u6765 --\x3e\n    <slot name="my-text">My default text</slot>\n  </p>\n  <slot name="image">\n    <div>\u9ed8\u8ba4\u7684\u5185\u5bb9</div>\n  </slot>\n</template>\n')),(0,a.kt)("p",null,"\u521b\u5efa\u5bf9\u8c61\u65f6\u9700\u8981\u4f7f\u7528 shadow DOM"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"constructor() {\n  super()\n  const template = document.querySelector('template#span-group')\n  const content = template.content.cloneNode(true) // \u4f7f\u7528\u6df1\u5ea6\u514b\u9686\uff0c\u5176\u4ed6\u4f4d\u7f6e\u5f15\u7528\u65f6\u4e0d\u4f1a\u76f8\u4e92\u5f71\u54cd\n  const shadowRoot = this.attachShadow({ mode: \"open\" });\n  shadowRoot.appendChild(content)\n}\n")),(0,a.kt)("p",null,"\u4f7f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<my-component>\n  <ul slot="my-text">\n    \x3c!-- \u5bf9\u5e94\u540d\u79f0\u7684 my-text \u4f1a\u51fa\u73b0\u5728\u5bf9\u5e94\u7684 html \u4e2d --\x3e\n    <li>Let\'s have some different text!</li>\n    <li>In a list!</li>\n  </ul>\n  <div>\u6eda</div>\n</my-component>\n')),(0,a.kt)("p",null,"\u7528\u6237\u63d0\u4f9b\u7684\u6807\u8bb0\u79f0\u4e3a light DOM\u3002\u4f7f\u7528 Shadow DOM \u4f1a\u5c06 light DOM \u548c Shadow DOM \u5408\u5e76\u6210\u4e3a\u4e00\u4e2a\u65b0\u7684 DOM \u6811\u3002"),(0,a.kt)("p",null,"\u901a\u8fc7 slot \u5728 Shadow DOM \u4e2d\u5c55\u793a\u7684\u5143\u7d20\u88ab\u79f0\u4e3a\u5206\u53d1\u8282\u70b9\u3002\u8fd9\u4e9b\u7ec4\u4ef6\u88ab\u63d2\u5165\u524d\u7684\u6837\u5f0f\u4e5f\u5c06\u4f1a\u88ab\u7528\u4e8e\u4ed6\u4eec\u63d2\u5165\u540e\u3002\u5728 Shadow DOM \u4e2d\uff0c\u5206\u53d1\u8282\u70b9\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"::sloted()")," \u6765\u83b7\u53d6\u989d\u5916\u7684\u6837\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css"},"::slotted(img) {\n  float: left;\n}\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"::sloted()")," \u53ef\u4ee5\u63a5\u53d7\u4efb\u4f55\u6709\u6548\u7684 CSS \u9009\u62e9\u5668\uff0c\u4f46\u5b83\u53ea\u80fd\u9009\u62e9\u9876\u7ea7\u8282\u70b9\uff0c\u4f8b\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"::slotedd(section img)")," \u7684\u60c5\u51b5\uff0c\u5c06\u4e0d\u4f1a\u4f5c\u7528\u4e8e this content"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css"},'<image-gallery>\n  <section slot="image">\n    <img src="foo.jpg">\n  </section>\n</image-gallery>\n')),(0,a.kt)("p",null,"\u4f60\u53ef\u4ee5\u901a\u8fc7 JavaScript \u4e0e slots \u8fdb\u884c\u4ea4\u4e92\u53bb\u76d1\u6d4b\u54ea\u4e2a\u8282\u70b9\u88ab\u5206\u53d1\u5230\u54ea\u4e2a slot\uff0c\u54ea\u4e9b slot \u88ab\u63d2\u5165\u4e86\u5143\u7d20\uff0c\u4ee5\u53ca slotchange \u4e8b\u4ef6\u3002"),(0,a.kt)("p",null,"\u8981\u627e\u51fa\u54ea\u4e9b\u5143\u7d20\u5df2\u7ecf\u88ab\u5206\u53d1\u7ed9\u5bf9\u5e94\u7684 slots \u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"slot.assignedNodes()")," \u5982\u679c\u4f60\u8fd8\u60f3\u67e5\u770b slot \u7684\u9ed8\u8ba4\u5185\u5bb9\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"slot.assignedNodes({flatten: true})")," \u8981\u627e\u51fa\u54ea\u4e9b slot \u88ab\u5206\u53d1\u7684\u5143\u7d20\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"element.assignedSlot")," \u5f53 slot \u5185\u7684\u8282\u70b9\u53d1\u751f\u6539\u53d8\uff0c\u5373\u6dfb\u52a0\u6216\u5220\u9664\u8282\u70b9\u65f6\uff0c\u5c06\u4f1a\u51fa\u53d1 ",(0,a.kt)("inlineCode",{parentName:"p"},"slotchange")," \u4e8b\u4ef6\u3002\u8981\u6ce8\u610f\u7684\u662f\uff0c\u53ea\u6709\u5f53slot\u8282\u70b9\u81ea\u8eab\u6539\u53d8\u624d\u4f1a\u89e6\u53d1\uff0c\u800c\u8fd9\u4e9b slot \u8282\u70b9\u7684\u5b50\u8282\u70b9\u5e76\u4e0d\u4f1a\u89e6\u53d1\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"slot.addEventListener('slotchange', e => {\n  const changedSlot = e.target;\n  console.log(changedSlot.assignedNodes());\n});\n")),(0,a.kt)("p",null,"\u5728\u5143\u7d20\u7b2c\u4e00\u6b21\u521d\u59cb\u5316\u65f6\uff0cChrome \u4f1a\u89e6\u53d1 slotchange \u4e8b\u4ef6\uff0c\u800c Safari \u548c Firefox \u5219\u4e0d\u4f1a\u3002"),(0,a.kt)("h2",{id:"api"},"API"),(0,a.kt)("p",null,"Web Component \u76f8\u5173\u7684 API"),(0,a.kt)("h3",{id:"customelements"},"customElements"),(0,a.kt)("p",null,"customElements.define()"),(0,a.kt)("p",null,"customElements.get()"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const MyElement = customElement.get('my-element')\n// get \u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\u5230 customElement \u7684\u7c7b\uff0c\u5b9e\u4f8b\u5316\u540e\u5373\u53ef\u6dfb\u52a0\u5230 DOM \u4e2d\ndocument.body.appendChild(new MyElement)\n")),(0,a.kt)("p",null,"customElements.upgrade()"),(0,a.kt)("p",null,"customElements.whenDefined()"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"customElements.whenDefined('my-element')\n  .then(() => {\n})\n")),(0,a.kt)("h3",{id:"shadowroot"},"shadowRoot"),(0,a.kt)("h2",{id:"\u8fdb\u9636\u4f7f\u7528"},"\u8fdb\u9636\u4f7f\u7528"),(0,a.kt)("h3",{id:"\u6a21\u677f\u5143\u7d20"},"\u6a21\u677f\u5143\u7d20"),(0,a.kt)("p",null,"\u9664\u4e86\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"this.shadowRoot.innerHTML")," \u6765\u5411\u4e00\u4e2a\u5143\u7d20\u7684 shadow root \u6dfb\u52a0 HTML\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"<template>"),"\u3002template \u4fdd\u5b58HTML \u4f9b\u4ee5\u540e\u4f7f\u7528\u3002\u5b83\u4e0d\u4f1a\u88ab\u6e32\u67d3\uff0c\u5e76\u53ea\u6709\u786e\u4fdd\u5185\u5bb9\u662f\u6709\u6548\u7684\u624d\u4f1a\u8fdb\u884c\u89e3\u6790\u3002template \u4e2d\u7684 JavaScript \u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u4e5f\u4e0d\u4f1a\u83b7\u53d6\u4efb\u4f55\u5916\u90e8\u8d44\u6e90\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5b83\u662f\u9690\u85cf\u7684\u3002"),(0,a.kt)("p",null,"\u5f53\u4e00\u4e2a web component \u9700\u8981\u6839\u636e\u4e0d\u540c\u7684\u60c5\u51b5\u6765\u6e32\u67d3\u4e0d\u540c\u7684\u6807\u8bb0\u65f6\uff0c\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u6a21\u677f\u6765\u5b8c\u6210\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class MyElement extends HTMLElement {\n  constructor() {\n    const shadowRoot = this.attachShadow({mode: 'open'});\n    // \u5c06\u4e24\u4e2a template \u653e\u5728 shadow root \u5185\uff0c\u4f46\u8fd9\u4e24\u4e2a\u6a21\u677f\u90fd\u662f\u9690\u85cf\u7684\uff0c\u6700\u5f00\u59cb\u53ea\u6e32\u67d3\u4e86 div#container\n    this.shadowRoot.innerHTML = `\n    <template id=\"view1\">\n        <p>This is view 1</p>\n    </template>\n    <template id=\"view1\">\n        <p>This is view 1</p>\n    </template>\n    <div id=\"container\">\n        <p>This is the container</p>\n    </div>`\n  }\n  connectedCallback() {\n    // \u83b7\u53d6\u6a21\u677f\u5185\u5bb9\n    const content = this.shadowRoot.querySelector('#view1').cloneNode(true);\n    this.container = this.shadowRoot.querySelector('#container');\n    // \u5c06\u6a21\u677f\u5185\u7684\u5185\u5bb9\u63d2\u5165\u5230\u6a21\u677f\u5185\n    this.container.appendChild(content.content);\n  }\n}\n")),(0,a.kt)("h3",{id:"\u6269\u5c55\u539f\u751f\u5143\u7d20"},"\u6269\u5c55\u539f\u751f\u5143\u7d20"),(0,a.kt)("p",null,"\u81ea\u5b9a\u4e49\u5143\u7d20\u5141\u8bb8\u4f7f\u7528\u6269\u5c55\u539f\u751f\u5185\u7f6e\u5143\u7d20\uff0c\u652f\u6301\u589e\u5f3a\u5df2\u7ecf\u5b58\u5728\u7684 HTML \u5143\u7d20\uff0c\u4f8b\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"<img>")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"<buttons>"),"\u3002"),(0,a.kt)("p",null,"\u6269\u5c55\u73b0\u6709 HTML \u5143\u7d20\u7684\u4f1a\u7ee7\u627f\u4e86\u5143\u7d20\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u8fd9\u5141\u8bb8\u5bf9\u73b0\u6709\u5143\u7d20\u8fdb\u884c\u9010\u6b65\u7684\u589e\u5f3a\u3002\u8fd9\u610f\u5473\u7740\u5373\u4f7f\u5728\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5143\u7d20\u7684\u6d4f\u89c8\u5668\u4e2d\uff0c\u5b83\u4ecd\u662f\u53ef\u7528\u7684\u3002\u5b83\u53ea\u4f1a\u964d\u7ea7\u5230\u9ed8\u8ba4\u7684\u5185\u7f6e\u884c\u4e3a\u3002\u800c\u5982\u679c\u5b83\u662f\u4e00\u4e2a\u5168\u65b0\u7684 HTML \u6807\u7b7e\uff0c\u90a3\u5b83\u5c06\u4f1a\u5b8c\u5168\u65e0\u6cd5\u4f7f\u7528\u3002"),(0,a.kt)("p",null,"\u4f8b\u5982\uff0c\u6211\u4eec\u60f3\u8981\u589e\u5f3a\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"p"},"<button>"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class WordCount extends HTMLButtonElement {\n  constructor() {\n    super();\n    // button \u4e2d\u9ed8\u8ba4\u5185\u5bb9\u4e3a\u6b63\u786e\uff0c\u70b9\u51fb\u540e\u5207\u6362\u5185\u5bb9\n    this.textContent = '\u6b63\u786e'\n    this.onclick = () => {\n      if (this.innerText === '\u6b63\u786e') {\n        this.textContent = '\u9519\u8bef'\n      } else {\n        this.textContent = '\u6b63\u786e'\n      }\n    }\n  }\n}\ncustomElements.define('toggle-button', WordCount, { extends: 'button' });\n")),(0,a.kt)("p",null,"\u6211\u4eec\u7684 web component \u53ef\u4ee5\u6269\u5c55 HTMLButtonElement\uff0c\u6bd4 HTMLElement \u66f4\u5177\u4f53\u3002\u5f53\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"customElements.define()")," \u7684\u65f6\u5019\u8fd8\u9700\u8981\u6dfb\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u53c2\u6570 ",(0,a.kt)("inlineCode",{parentName:"p"},"{extends: 'button'}")," \u6765\u8868\u793a\u6211\u4eec\u7684\u7c7b\u6269\u5c55\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"<button>")," \u5143\u7d20\u3002\u4f46\u662f\u8fd9\u662f\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a\u591a\u4e2a\u5143\u7d20\u53ef\u80fd\u5171\u4eab\u4e00\u4e2a DOM \u63a5\u53e3\u3002\u4f8b\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"<q>")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"<blockquote>")," \u90fd\u5171\u4eab HTMLQuoteElement \u63a5\u53e3\u3002"),(0,a.kt)("p",null,"\u8fd9\u4e2a\u589e\u5f3a\u540e\u7684 button \u53ef\u4ee5\u901a\u8fc7 is \u5c5e\u6027\u6765\u88ab\u4f7f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<button is="my-button">\n')),(0,a.kt)("p",null,"\u73b0\u5728\u5b83\u5c06\u88ab\u6211\u4eec\u7684 MyElement \u7c7b\u589e\u52a0\uff0c\u5982\u679c\u5b83\u52a0\u8f7d\u5728\u4e00\u4e2a\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5143\u7d20\u7684\u6d4f\u89c8\u5668\u4e2d\uff0c\u5b83\u5c06\u964d\u7ea7\u5230\u4e00\u4e2a\u6807\u51c6\u7684\u6309\u94ae\uff0c\u771f\u6b63\u7684\u6e10\u8fdb\u5f0f\u589e\u5f3a\u3002"),(0,a.kt)("p",null,"\u6ce8\u610f\uff0c\u5728\u6269\u5c55\u73b0\u6709\u5143\u7d20\u65f6\uff0c\u90e8\u5206\u5143\u7d20\u4e0d\u80fd\u4f7f\u7528 Shadow DOM\u3002\u8fd9\u53ea\u662f\u4e00\u79cd\u6269\u5c55\u539f\u751f HTML \u5143\u7d20\u7684\u65b9\u6cd5\uff0c\u5b83\u7ee7\u627f\u4e86\u6240\u6709\u73b0\u6709\u7684\u5c5e\u6027\u3001\u65b9\u6cd5\u548c\u4e8b\u4ef6\uff0c\u5e76\u63d0\u4f9b\u4e86\u989d\u5916\u7684\u529f\u80fd\u3002\u5f53\u7136\u53ef\u4ee5\u5728\u7ec4\u4ef6\u4e2d\u4fee\u6539\u5143\u7d20\u7684 DOM \u548c CSS\uff0c\u4f46\u662f\u5c1d\u8bd5\u521b\u5efa\u4e00\u4e2a Shadow root \u5c06\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002"),(0,a.kt)("p",null,"\u6269\u5c55\u5185\u7f6e\u5143\u7d20\u7684\u53e6\u4e00\u4e2a\u597d\u5904\u5c31\u662f\uff0c\u8fd9\u4e9b\u5143\u7d20\u4e5f\u53ef\u4ee5\u5e94\u7528\u4e8e\u5b50\u5143\u7d20\u88ab\u9650\u5236\u7684\u60c5\u51b5\u3002\u4f8b\u5982 thead \u5143\u7d20\u53ea\u5141\u8bb8 tr \u4f5c\u4e3a\u5176\u5b50\u5143\u7d20\uff0c\u56e0\u6b64",(0,a.kt)("inlineCode",{parentName:"p"},"<awesome-tr>")," \u5143\u7d20\u5c06\u5448\u73b0\u65e0\u6548\u6807\u8bb0\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u62d3\u5c55\u5185\u7f6e\u7684 tr \u5143\u7d20\u3002\u5e76\u50cf\u8fd9\u6837\u4f7f\u7528\u5b83\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<table>\n  <thead>\n    <tr is="awesome-tr"></tr>\n  </thead>\n</table>\n')),(0,a.kt)("h3",{id:"\u5c01\u88c5"},"\u5c01\u88c5"),(0,a.kt)("h4",{id:"\u81ea\u5b9a\u4e49\u6309\u94ae"},"\u81ea\u5b9a\u4e49\u6309\u94ae"),(0,a.kt)("p",null,"\u5c06\u7ec4\u4ef6\u8fdb\u884c\u5c01\u88c5\uff0c\u4f7f\u7ec4\u4ef6\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 script \u8c03\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const template = document.createElement('template');\ntemplate.innerHTML = `\n  <style>\n  button {\n    width: 60px;\n    height: 30px;\n    cursor: pointer;\n    color: blue;\n    border: 0;\n    border-radius: 5px;\n    background-color: #F0F0F0;\n  }\n  </style>\n  <div>\n  <button id=\"btn\">Add</button>\n    <p id=\"message\"><slot name=\"my-text\">My Default Text</slot></p>\n    <ul id=\"text-list\"></ul>\n  </div>\n`;\nconst Texts = [\n  'My lady, Hello!',\n  'BuiBuiBui',\n  'BiliBili',\n  'Haiwei is NO.1'\n]\nclass MyButton extends HTMLElement {\n  constructor () {\n    super()\n    const content = template.content.cloneNode(true);\n    const button = content.querySelector('#btn');\n    const textList = content.querySelector('#text-list');\n    this.$button = button;\n    this.$message = content.querySelector('#message');\n    button.addEventListener('click', (evt) => {\n      const li = document.createElement('li');\n      li.innerText = Texts[Math.floor(Math.random() * 4)];\n      textList.appendChild(li);\n      this.dispatchEvent(\n        new CustomEvent('onClick', {\n          detail: 'Hello fom within the Custom Element'\n        })\n      )\n    })\n    this.attachShadow({ mode: 'open' }).appendChild(content);\n  }\n  get text () {\n    return this.getAttribute('text');\n  }\n  set text (value) {\n    this.setAttribute('text', value);\n  }\n  static get observedAttributes() {\n    return ['text'];\n  }\n  attributeChangedCallback(name, oldVal, newVal) {\n    this.render();\n  }\n  render() {\n    this.$message.innerText = this.text;\n  }\n}\nwindow.customElements.define('my-button', MyButton)\n")),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"index.html")," \u4e2d\u76f4\u63a5\u5f15\u5165\u5373\u53ef\u4f7f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>My Component</title>\n    <script src="./MyButton.js"><\/script>\n  </head>\n  <body>\n    <my-button> \n      <p slot="my-text">Another text from outside</p>\n    </my-button>\n  </body>\n  <script>\n    const mybutton = document.querySelector(\'my-button\');\n    mybutton.addEventListener(\'onClick\', (value) => {\n      console.log(value)\n      mybutton.text = value.detail\n    });\n  <\/script>\n</html>\n')),(0,a.kt)("h4",{id:"\u56fe\u7247\u61d2\u52a0\u8f7d"},"\u56fe\u7247\u61d2\u52a0\u8f7d"),(0,a.kt)("p",null,"\u8fd9\u662f\u4e00\u4e2a\u56fe\u7247\u61d2\u52a0\u8f7d\u7684\u7ec4\u4ef6 lazy-img \u81ea\u5b9a\u4e49\u7ec4\u4ef6\u4e3b\u8981\u4ee5\u5143\u7d20 img \u6807\u7b7e\u8fdb\u884c\u5b9e\u73b0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<lazy-img\n  src="path/to/image.jpg"\n  width="480"\n  height="320"\n  delay="500"\n  margin="0px"></lazy-img>\n')),(0,a.kt)("h3",{id:"\u6d4b\u8bd5"},"\u6d4b\u8bd5"),(0,a.kt)("p",null,"\u4e0e\u4e3a Angular \u548c React \u8fd9\u6837\u7684\u6846\u67b6\u7f16\u5199\u6d4b\u8bd5\u76f8\u6bd4\uff0c\u6d4b\u8bd5 web components \u65e2\u7b80\u5355\u53c8\u76f4\u63a5\u3002\u4e0d\u9700\u8981\u8f6c\u6362\u6216\u8005\u590d\u6742\u7684\u8bbe\u7f6e\uff0c\u53ea\u9700\u8981\u521b\u5efa\u5143\u7d20\uff0c\u5e76\u5c06\u5176\u6dfb\u52a0\u5230 DOM \u4e2d\u5e76\u8fd0\u884c\u6d4b\u8bd5\u3002 \u8fd9\u91cc\u6709\u4e00\u4e2a\u4f7f\u7528 Mocha \u7684\u6d4b\u8bd5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import 'path/to/my-element.js';\n\ndescribe('my-element', () => {\n  let element;\n  beforeEach(() => {\n    element = document.createElement('my-element');\n    document.body.appendChild(element);\n  });\n  afterEach(() => {\n    document.body.removeChild(element);\n  });\n  it('should test my-element', () => {\n    // run your test here\n  });\n});\n")),(0,a.kt)("p",null,"\u5728\u8fd9\u91cc\uff0c\u7b2c\u4e00\u884c\u5f15\u5165\u4e86 my-element.js \u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5c06\u6211\u4eec\u7684 web  component \u901a\u8fc7 ES6 \u6a21\u5757\u5bf9\u5916\u66b4\u9732\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u6d4b\u8bd5\u6587\u4ef6\u4e5f\u9700\u8981\u4f5c\u4e3a\u4e00\u4e2a ES6 \u6a21\u5757\u52a0\u8f7d\u5230\u6d4f\u89c8\u5668\u4e2d\u3002\u8fd9\u9700\u8981\u4ee5\u4e0b\u7684index.html\u80fd\u591f\u5728\u6d4f\u89c8\u5668\u4e2d\u8fd0\u884c\u6d4b\u8bd5\u3002\u9664\u4e86Mocha\uff0c\u8fd9\u4e2a\u8bbe\u7f6e\u8fd8\u52a0\u8f7d\u4e86WebcomponentsJS polyfill\uff0cChai\u7528\u4e8e\u65ad\u8a00\uff0c\u4ee5\u53caSinon\u7528\u4e8e\u76d1\u542c\u548c\u6a21\u62df\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<html>\n  <head>\n    <meta charset="utf-8">\n    <link rel="stylesheet" href="../node_modules/mocha/mocha.css">\n    <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"><\/script>\n    <script src="../node_modules/sinon/pkg/sinon.js"><\/script>\n    <script src="../node_modules/chai/chai.js"><\/script>\n    <script src="../node_modules/mocha/mocha.js"><\/script>\n\n    <script>\n      window.assert = chai.assert;\n      mocha.setup(\'bdd\');\n    <\/script>\n    <script type="module" src="path/to/my-element.test.js"><\/script>\n    <script type="module">\n      mocha.run();\n    <\/script>\n\n  </head>\n  <body>\n    <div id="mocha"></div>\n  </body>\n</html>\n')),(0,a.kt)("p",null,"\u5728\u52a0\u8f7d\u5b8c\u6240\u9700\u7684 scripts \u540e\uff0c\u6211\u4eec\u66b4\u9732 chai.assert \u4f5c\u4e3a\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728\u6d4b\u8bd5\u4e2d\u7b80\u6613\u7684\u4f7f\u7528 assert()\uff0c\u5e76\u8bbe\u7f6e Mocha \u6765\u4f7f\u7528 BDD \u63a5\u53e3\u3002\u7136\u540e\u52a0\u8f7d\u6d4b\u8bd5\u6587\u4ef6\uff0c\u5e76\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"mocha.run()")," \u8fd0\u884c\u6d4b\u8bd5\u3002"),(0,a.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u5728\u4f7f\u7528ES6\u6a21\u5757\u5316\u65f6\uff0c\u8fd8\u9700\u8981\u5c06 ",(0,a.kt)("inlineCode",{parentName:"p"},"mocha.run()")," \u653e\u5728",(0,a.kt)("inlineCode",{parentName:"p"},'type="module"'),"\u7684script\u4e2d\u3002\u56e0\u4e3a ES6 \u6a21\u5757\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u5ef6\u8fdf\u6267\u884c\u7684\u3002\u5982\u679c mocha.run() \u653e\u5728\u4e00\u4e2a\u5e38\u89c4\u7684 script \u6807\u7b7e\u4e2d\uff0c\u4ed6\u5c06\u4f1a\u5728\u52a0\u8f7d my-element.test.js \u4e4b\u524d\u6267\u884c\u3002"),(0,a.kt)("h2",{id:"\u53c2\u8003\u6587\u7ae0"},"\u53c2\u8003\u6587\u7ae0"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u4f5c\u8005"),(0,a.kt)("th",{parentName:"tr",align:null},"\u6587\u7ae0\u540d\u79f0"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CodeX"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://juejin.cn/post/6956206468316004382"},"WebComponent\u662f\u4e2a\u4ec0\u4e48\u4e1c\u897f\uff1f"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"\u5c71\u7af9\u548c\u963f\u74dc"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://zhuanlan.zhihu.com/p/64619005"},"Web Component\u53ef\u4ee5\u53d6\u4ee3\u4f60\u7684\u524d\u7aef\u6846\u67b6\u5417\uff1f"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"MDN \u5b98\u65b9\u6587\u6863"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Web_components/Using_templates_and_slots"},"\u4f7f\u7528 templates and slots"))))))}d.isMDXComponent=!0}}]);