"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2872],{9613:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>k});var a=t(9496);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,k=d["".concat(s,".").concat(m)]||d[m]||c[m]||l;return t?a.createElement(k,o(o({ref:n},u),{},{components:t})):a.createElement(k,o({ref:n},u))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[d]="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5304:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var a=t(8028),r=(t(9496),t(9613));const l={},o=void 0,i={unversionedId:"Linux & \u64cd\u4f5c\u7cfb\u7edf/4.3-\u5bb9\u5668\u7684\u4f7f\u7528",id:"Linux & \u64cd\u4f5c\u7cfb\u7edf/4.3-\u5bb9\u5668\u7684\u4f7f\u7528",title:"4.3-\u5bb9\u5668\u7684\u4f7f\u7528",description:"Create by fall on 28 Jun 2023",source:"@site/my-docs/Linux & \u64cd\u4f5c\u7cfb\u7edf/4.3-\u5bb9\u5668\u7684\u4f7f\u7528.md",sourceDirName:"Linux & \u64cd\u4f5c\u7cfb\u7edf",slug:"/Linux & \u64cd\u4f5c\u7cfb\u7edf/4.3-\u5bb9\u5668\u7684\u4f7f\u7528",permalink:"/my-website/docs/Linux & \u64cd\u4f5c\u7cfb\u7edf/4.3-\u5bb9\u5668\u7684\u4f7f\u7528",draft:!1,editUrl:"https://github.com/my-docs/Linux & \u64cd\u4f5c\u7cfb\u7edf/4.3-\u5bb9\u5668\u7684\u4f7f\u7528.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"4.2-docker compose",permalink:"/my-website/docs/Linux & \u64cd\u4f5c\u7cfb\u7edf/4.2-docker compose"},next:{title:"5.1-kubernetes",permalink:"/my-website/docs/Linux & \u64cd\u4f5c\u7cfb\u7edf/5.1-kubernetes"}},s={},p=[{value:"\u5bb9\u5668\u7684\u540e\u7f00",id:"\u5bb9\u5668\u7684\u540e\u7f00",level:2},{value:"\u5e38\u89c1\u5bb9\u5668\u7684\u4f7f\u7528",id:"\u5e38\u89c1\u5bb9\u5668\u7684\u4f7f\u7528",level:2},{value:"ubuntu",id:"ubuntu",level:3},{value:"node",id:"node",level:3},{value:"mysql",id:"mysql",level:3},{value:"redies",id:"redies",level:3},{value:"nginx",id:"nginx",level:3},{value:"mongo",id:"mongo",level:3},{value:"postgres",id:"postgres",level:3},{value:"nicolaka/netshoot",id:"nicolakanetshoot",level:3},{value:"gitlab",id:"gitlab",level:3},{value:"\u53c2\u8003\u6587\u7ae0",id:"\u53c2\u8003\u6587\u7ae0",level:2}],u={toc:p},d="wrapper";function c(e){let{components:n,...t}=e;return(0,r.kt)(d,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Create by ",(0,r.kt)("strong",{parentName:"p"},"fall")," on 28 Jun 2023\nRecently revised in 12 Oct 2023")),(0,r.kt)("h2",{id:"\u5bb9\u5668\u7684\u540e\u7f00"},"\u5bb9\u5668\u7684\u540e\u7f00"),(0,r.kt)("p",null,"\u4e00\u4e9b\u540e\u7f00"),(0,r.kt)("p",null,"nanoserver\uff1a Windows Server 2016 \u7684\u6807\u51c6\u7248\u548c\u6570\u636e\u4e2d\u5fc3\u7248\u4e2d\u4f5c\u4e3a\u9644\u52a0\u5b89\u88c5\u9009\u9879\u53d1\u5e03,\u662f\u4e00\u79cd\u66f4\u8f7b\u3001\u66f4\u5feb\u3001\u66f4\u7a33\u5b9a\u3001\u66f4\u5b89\u5168\u4e14\u5360\u7528\u8d44\u6e90\u66f4\u5c11\u7684\u5b8c\u6574\u7684 Windows Server \u5b89\u88c5\u66ff\u4ee3\u65b9\u6848"),(0,r.kt)("p",null,"perl\uff1a"),(0,r.kt)("p",null,"bookworm:"),(0,r.kt)("p",null,"bullseye"),(0,r.kt)("h2",{id:"\u5e38\u89c1\u5bb9\u5668\u7684\u4f7f\u7528"},"\u5e38\u89c1\u5bb9\u5668\u7684\u4f7f\u7528"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5bf9\u4e8e\u4e0d\u540c\u7684\u5bb9\u5668\uff0c\u62e5\u6709\u4e0d\u540c\u7684\u53d8\u91cf\uff0c\u4e0d\u540c\u7684\u7aef\u53e3\uff0c\u4ee5\u53ca\u5de5\u4f5c\u8def\u5f84\u7b49\u914d\u7f6e\uff0c\u6240\u4ee5\u8fd9\u91cc\u4f1a\u5217\u51fa\u5e38\u89c1\u7684\u5bb9\u5668\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u4ee5\u4fbf\u8fdb\u884c\u53c2\u8003\u3002"),(0,r.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u6267\u884c\u547d\u4ee4\u65f6\u51fa\u73b0\u95ee\u9898\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u4f7f\u7528\u7684\u662f powershell")),(0,r.kt)("h3",{id:"ubuntu"},"ubuntu"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u8fd0\u884c ubuntu\ndocker run -it --name go-fly ubuntu bash\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},'# \u5c06\u5f53\u524d\u8def\u5f84\u6620\u5c04\u5230\u5bb9\u5668\u7684 src \u8def\u5f84\u4e0b\ndocker run -it --mount type=bind,src="$(pwd)",target=/src ubuntu bash\n')),(0,r.kt)("h3",{id:"node"},"node"),(0,r.kt)("p",null,"\u5c06\u5f53\u524d\u8def\u5f84\u548c\u5bb9\u5668\u8def\u5f84\u7ed1\u5b9a\uff0c\u4f7f\u7528 node:18.16.1 \u7248\u672c\u7136\u540e\u5728\u5bb9\u5668\u5185\u6267\u884c yarn install \u548c yarn run dev"),(0,r.kt)("p",null,"powershell"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},'docker run -dp 127.0.0.1:3000:3000 `\n    -w /app --mount "type=bind,src=$pwd,target=/app" `\n    node:18.16.1 `\n    sh -c "yarn install && yarn run dev"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'docker run -dp 127.0.0.1:3000:3000 \\\n    -w /app --mount type=bind,src="$(pwd)",target=/app \\\n    node:18.16.1 \\\n    sh -c "yarn install && yarn run dev"\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"-w /app")," - sets the \u201cworking directory\u201d or the current directory that the command will run from"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'--mount type=bind,src="$(pwd)",target=/app')," - bind mount the current directory from the host into the ",(0,r.kt)("inlineCode",{parentName:"li"},"/app")," directory in the container"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"node:18.16.1")," - \u4f7f\u7528\u7684\u955c\u50cf\uff0c\u8fd9\u4e2a\u955c\u50cf\u4e5f\u662f Dockerfile \u4e2d\u7684\u6307\u5b9a\u7684\u955c\u50cf"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'sh -c "yarn install && yarn run dev"')," - the command. You\u2019re starting a shell using ",(0,r.kt)("inlineCode",{parentName:"li"},"sh"),"and running ",(0,r.kt)("inlineCode",{parentName:"li"},"yarn install")," to install packages and then running ",(0,r.kt)("inlineCode",{parentName:"li"},"yarn run dev")," to start the development server. If you look in the ",(0,r.kt)("inlineCode",{parentName:"li"},"package.json"),", you\u2019ll see that the ",(0,r.kt)("inlineCode",{parentName:"li"},"dev")," script starts ",(0,r.kt)("inlineCode",{parentName:"li"},"nodemon"),".")),(0,r.kt)("h3",{id:"mysql"},"mysql"),(0,r.kt)("p",null,"\u521b\u5efa network"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"docker network create todo-app\n")),(0,r.kt)("p",null,"\u521b\u5efa mysql\uff0c\u5e76\u4e14\u8fde\u63a5\u5230 network"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"docker run -d `\n--network todo-app  --network-alias mysql `\n--name todo-sql `\n-v todo-app-store:/var/lib/mysql `\n-e MYSQL_ROOT_PASSWORD=secret `\n-e MYSQL_DATABASE=todoApp `\nmysql:8.0\n")),(0,r.kt)("p",null,"\u521b\u5efa\u5e94\u7528\uff0c\u7ed1\u5b9a\u672c\u5730\u5f00\u53d1\u6587\u4ef6\uff0c\u5e76\u4e14\u8fde\u63a5\u5230 network"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"docker run -d `\n--network todo-app `\n--name todo-node `\n-v todo-\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"services:\n   mysql:\n    image: mysql:5.7.35 \n    container_name: mysql # \u5bb9\u5668\u540d\u79f0\n    environment:\n      MYSQL_ROOT_PASSWORD: 123456 # \u6307\u5b9a\u7528\u6237\u5bc6\u7801\n      TZ: Asia/Shanghai\n    ports:\n      - 3306:3306 #\u672c\u5730\u7aef\u53e3\u53f7\u4e0e\u5bb9\u5668\u5185\u90e8\u7aef\u53e3\u53f7\n    volumes: #\u6307\u5b9a\u6302\u8f7d\u76ee\u5f55\n      - /usr/etc/mysql/datadir:/var/lib/mysql\n      - /usr/etc/mysql/config/my.cnf:/etc/mysql/my.cnf\n    command: \n      --max_connections=1000\n      --character-set-server=utf8mb4\n      --collation-server=utf8mb4_general_ci\n      --default-authentication-plugin=mysql_native_password\n")),(0,r.kt)("h3",{id:"redies"},"redies"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},'services:\n    redis:\n    image: redis:4.0.7  #\u955c\u50cf\u540d\u79f0\u4ee5\u53ca\u7248\u672c\n    restart: always  #\u91cd\u542fdocker\u540e\u8be5\u5bb9\u5668\u4e5f\u91cd\u542f\n    container_name: redis #\u5bb9\u5668\u540d\u79f0\n    ports:\n      - 6379:6379 #\u672c\u5730\u7aef\u53e3\u53f7\u4e0e\u5bb9\u5668\u5185\u90e8\u7aef\u53e3\u53f7\n    volumes: #\u6307\u5b9a\u6302\u8f7d\u76ee\u5f55\n      - /usr/etc/redis/redis.conf:/usr/local/etc/redis/redis.conf  #redis.conf\u6587\u4ef6\u548cdata\u76ee\u5f55\u5206\u522b\u6620\u5c04\u4e86\u4e3b\u673a\u7684redis.conf\u6587\u4ef6\u548c\u4e3b\u673a\u7684data\u76ee\u5f55\n      - /usr/etc/redis/data:/data\n    command:\n      /bin/bash -c "redis-server /usr/local/etc/redis/redis.conf " #\u4f7f\u7528command\u53ef\u4ee5\u8986\u76d6\u5bb9\u5668\u542f\u52a8\u540e\u9ed8\u8ba4\u6267\u884c\u7684\u547d\u4ee4\u3002\u8fd9\u91cc\u542f\u52a8\u6267\u884c\u6307\u5b9a\u7684redis.conf\u6587\u4ef6\n')),(0,r.kt)("h3",{id:"nginx"},"nginx"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"services:\n    nginx:\n    image: nginx:1.21.3 #\u955c\u50cf\u540d\u79f0\u4ee5\u53ca\u7248\u672c\n    restart: always #\u91cd\u542fdocker\u540e\u8be5\u5bb9\u5668\u4e5f\u91cd\u542f\n    container_name: nginx #\u5bb9\u5668\u540d\u79f0\n    ports:\n      - 80:80 #\u672c\u5730\u7aef\u53e3\u53f7\u4e0e\u5bb9\u5668\u5185\u90e8\u7aef\u53e3\u53f7\n      - 443:443 #\u672c\u5730\u7aef\u53e3\u53f7\u4e0e\u5bb9\u5668\u5185\u90e8\u7aef\u53e3\u53f7\n    volumes: #\u6307\u5b9a\u6302\u8f7d\u76ee\u5f55\n      - ./usr/etc/nginx/html:/usr/share/nginx/html\n      - ./usr/etc/nginx/log:/var/log/nginx\n      - ./usr/etc/nginx/conf:/etc/nginx/\n")),(0,r.kt)("h3",{id:"mongo"},"mongo"),(0,r.kt)("p",null,"5.0.18 \u7248\u672c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"docker run -it --name my-mongo -p 6200:27017 -v my-mongo-data:/data/db -v my-mongo-config:/data/configdb mongo:5.0.18 -e MONGO_INITDB_ROOT_USERNAME=fall -e MONGO_INITDB_ROOT_PASSWORD=password123\n")),(0,r.kt)("p",null,"\u5982\u679c\u60f3\u8981\u4f7f\u7528\u96c6\u7fa4\uff0c\u5728\u5f00\u59cb\u7684\u65f6\u5019\u5c31\u8981\u8fdb\u884c\u914d\u7f6e --replSet"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528 prisma \u65f6\uff0c\u5c31\u9700\u8981\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u521b\u5efa\u5bb9\u5668")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-Bash"},"docker run -it --name my-mongo -p 6200:27017 -v my-mongo-data:/data/db -v my-mongo-config:/data/configdb mongo:6.0.10 --replSet replSet1\n")),(0,r.kt)("h3",{id:"postgres"},"postgres"),(0,r.kt)("p",null,"\u62c9\u53d6 postres"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u83b7\u53d6 15.3 \u7248\u672c\u7684 postgres\ndocker pull postgres:15.4-alpine\n\n# \u8fd0\u884c\u955c\u50cf\ndocker run --name postgresql-standard --env POSTGRES_PASSWORD=996007aile --publish 9600:5432 postgres:15.4-alpine\n\n# \u521b\u5efa\u4e00\u4e2a\u4e13\u7528\u5377\u7528\u4e8e\u6570\u636e\u5e93\u5b58\u50a8\uff0c\u5b9e\u73b0\u6570\u636e\u6301\u4e45\u6027\ndocker run --name db-postgres -e POSTGRES_PASSWORD=mypassword -e POSTGRES_USER=fall -e POSTGRES_DB=myapp -p 9600:5432 -v postgresvol:/var/lib/postgresql/data -d postgres:15.4-alpine\n# \u7528\u6237\u4fe1\u606f\u4f1a\u88ab\u4fdd\u5b58\u5728 volume \u4e2d\uff0c\u8bf7\u5728\u7b2c\u4e00\u6b21\u8fd0\u884c\u65f6\u8bbe\u5b9a\u597d\uff0c\u6216\u518d\u6b21\u8fd0\u884c\u524d\u5220\u9664 volume\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker exec -it db-postgres bash\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'# docker-compose.yml\npostgres:\n  image: postgres\n  container_name: postgres-local\n  user: fall\n  environment:\n    POSTGRES_USER: fall\n    POSTGRES_PASSWORD: password\n    POSTGRES_DB: myapp\n  volumes:\n    postgresvol:/var/lib/postgresql/data\n  ports:\n    - "9600:5432"\n')),(0,r.kt)("h3",{id:"nicolakanetshoot"},"nicolaka/netshoot"),(0,r.kt)("p",null,"\u96c6\u6210\u4e86\u5f88\u591a\u5de5\u5177\uff0c\u7528\u4e8e\u7f51\u7edc\u95ee\u9898\u8ffd\u8e2a\u548c\u89e3\u51b3\u7684\u5de5\u5177"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -it --network todo-app nicolaka/netshoot\n")),(0,r.kt)("h3",{id:"gitlab"},"gitlab"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"docker run -d -p 5020:22 -p 5080:80 -p 5040:443 `\n --name my-gitlab `\n --hostname gitlab.example.com `\n --restart unless-stopped `\n --shm-size 256m `\n -v gitlab_config:/etc/gitlab `\n -v gitlab_logs:/var/log/gitlab `\n -v gitlab_data:/var/opt/gitlab `\n gitlab/gitlab-ce\n # gitlab-ce:14.7.0-ce.0 ce Community Edition\n # --hostname \u5339\u914d\u4f60\u8bbf\u95ee gitlab \u7684\u57df\u540d\n")),(0,r.kt)("p",null,"\u8fdb\u5165\u5230\u5bb9\u5668\u4e2d\uff0c\u4f7f\u7528\u8be5\u547d\u4ee4\u83b7\u53d6 root \u7528\u6237\u7684\u5bc6\u7801\uff08\u5bc6\u7801\u4f1a\u5728\u7b2c\u4e00\u6b21\u914d\u7f6e\u91cd\u542f 24 \u5c0f\u65f6\u540e\u81ea\u52a8\u5220\u9664\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker exec -it my-gitlab grep 'Password:' /etc/gitlab/initial_root_password\n# seRWjNOwSGZdqi9eheOQAqNXOqGzHQ5kVG1hnrc4PUI=\n")),(0,r.kt)("h2",{id:"\u53c2\u8003\u6587\u7ae0"},"\u53c2\u8003\u6587\u7ae0"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u4f5c\u8005"),(0,r.kt)("th",{parentName:"tr",align:null},"\u6587\u7ae0\u540d\u79f0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u6768\u9ad8\u8d85"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://juejin.cn/post/6844903544496062472"},"\u901a\u8fc7 docker \u642d\u5efa\u81ea\u7528\u7684 gitlab \u670d\u52a1"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u5b98\u65b9\u6587\u6863"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})))))}c.isMDXComponent=!0}}]);