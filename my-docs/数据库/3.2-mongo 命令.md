> Create by **fall** on：2021-09-17
> Recently revised in：2021-09-27

### 数据库控制

`db` 显示当前的数据库对象或集合

`show dbs` 显示所有的数据列表

`use databaseName` 连接到 `databaseName` 这个数据库

## 命令行操作

### 数据库操作

```bash
# 先查看一下当前的数据库
show dbs
# 创建数据库
use [databaseName] # 使用 / 创建数据库
show dbs # 查看当前所有的数据库
# 删除数据库
db.dropDatabase() # 删除当前使用的数据库
show dbs
```

### 集合操作

```bash
# 添加集合
use test
db.createCollection("article") # 添加一个名为 article 的集合
show collections # 展示当前数据库内的集合
# 删除集合
db.article.drop() # 删除当前集合
show collections
```

### 插入文档

```bash
#  db.collection.insert(document) #通过 collection 对象的 insert 方法向集合中插入文档
# 插入文档
db.createCollection('article')
db.article.insert({
	name:'Fall',
	description:'未来的前端艺术家',
	createBy:'Fall',
	selfWebUrl:'www.fall.com'
})
db.article.find({}) # 查询所有 article 的文档
```

### 更新数据

```bash
db.article.update({name:'fall'},{name:'fall_again'},{multi:false}) 
# 第一个参数，表示要替换的内容
# 第二个参数，表示替换后的内容
# 第三个选项为配置，multi 表示是否为多选，默认为 false

# 只进行替换 name 属性
db.article.update({name:'fall'},{$set:{name:'fall_again'}},{multi:false})
```

替换文档

```bash
db.article.save({})
```

### 删除文档

```bash
# 删除文档内容
# db.collection.remove(<query>,{justOne:<boolean>})
db.article.remove({'name':'fall'})
#删除 name 为 fall 的所有文档
```

### 查询文档

```bash
# 通过 find 对象来查找文档
# db.collection.find(query,projection)
# query:查询条件
# projection：使用投影操作符指定返回的键
db.article.find() # 查询 article 中的全部文档
```

### 指定查找操作

```bash
# 读取指定文档
# db.collection.find().limit(Number)
db.article.find().limit(2) # 只查看符合条件的的2条数据
# 跳过指定数量的文档
# db.collection.find().limit(NUMBER).skip(NUMBER)
db.article.find().limit(2).skip(2) # 跳过两条数据，查看两条数据
```

### 排序操作

```bash
# db.collection.find().sort({KEY:1})
# 1 为升序， -1 为降序
db.article.find().sort({likes:-1})  # 以 likes 字段进行降序排列
```

### 索引

```bash
# 创建索引提高查询效率
# db.collection.createIndex(keys,options)
# option 中的配置选择
# background 创建过程中会阻塞其他的数据库操作，设置为 true 表示后台创建，默认值为 false
# unique 设置为 true 表示唯一索引
db.article.createIndex({"title":1,"description":-1},{background:true})
db.article.getIndexes() # 查看集合中已经创建的索引
```

### 聚合

```bash
# 聚合表示对数据的多个内容进行操作
db.article.aggregate([{$group:}])
```

