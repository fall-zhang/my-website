---
sidebar_position: 63
---

>Create by **fall** on 2021-01-03
>Recently revised in 2023-03-29 

## 如何保证数据安全

HTTPS（Hyper Text Transfer Protocol over SecureSocket Layer）

以 HTTP 为基础，提供额外验证，即，HTTP+ Secure

实际使用中，会使用很多信息，最常用的是

客户端请求时，会先发送

- 所访问的网站
- 所支持的算法
- 生成的随机数

相应时，会采用以下答复

- 所给出的算法中，选出一种算法
- 也会生成一个随机数
- 网站的证书

**网站证书**：

- 包含证书的使用者，颁发给了那个网站或者是使用者
- 证书的有效期
- 一个公钥
- 证书的颁发者

证书可以证明你拥有了一个可以确定某某人的证明

在所有聊天记录都被偷看的情况下，交换了密钥。

> http 协议的默认端口为 80
> https 的默认端口为 43

## 加密算法

### 对称加密



### 非对称加密

首先将网络分为三部分，内容提供，内容传输，内容使用。

非对称加密，表示用 A 作为锁，用 B 才能打开，用 B 作为锁，用 A 才能打开。同时拥有两个内容才能保证能修改，能读取。

A 和 B 可以理解为 铀<sup>235</sup> 铀<sup>238</sup> 同时出现才可以核聚变。

```
|       内容提供       |                内容传输                      |     用户         |
| 发送钥匙 A 和内容     |  只有 A，没有 B，可以获取内容，但是无法加密     |  使用 A 解锁内容  |
|                     |   使用 A 进行加密修改内容，                    |                  |
|                     |   用户没有 B，导致无法读取内容                 |                  |
内容使用者返回数据的时候
| 使用 B 进行解密     |    没有 B 没办法解密（用户）            |  使用 A 再加密内容 |
可知，返回的数据，只有我们两个能够读取到，所以，如果用户，再创造出非对称加密的钥匙，就可以在传输方无法解密情况下，完全保密。
```

这样做就可以保证内容不会被篡改——篡改后用户无法读取内容

返回内容的时候，传输方无法解密，就保证了保密的内容传输

还有一种可能被篡改，传输方假装自己是用户，然后它生成非对称加密，和内容提供方通信，与此同时，它和用户的通信篡改内容，我就只和内容传输方通信了。

### 混合使用



## HTTPS：让数据传输更安全

- 在 TCP 和 HTTP 之间插入一个安全层，所有经过安全层的数据都会被加密或者解密；
- 对称加密：浏览器发送加密套件列表和一个随机数 client-random，服务器会从加密套件中选取一个加密套件，然后生成一个随机数 service-random，返回给浏览器。这样浏览器和服务器都有相同 client-random 和 service-random，再用相同的方法将两者混合生成一个密钥 master secret，双方就可以进行数据加密传输了；
- 对称加密缺点：client-random 和 service-random 的过程都是明文，黑客可以拿到协商的加密套件和双方随机数，生成密钥，数据可以被破解；
- 非对称加密：浏览器发送加密套件列表给服务器，服务器选择一个加密套件，返回加密套件和公钥，浏览器用公钥加密数据，服务器用私钥解密；
- 非对称加密缺点：加密效率太低，不能保证服务器发送给浏览器的数据安全，黑客可以获取公钥；
- 对称加密结合非对称加密：浏览器发送对称加密套件列表、非对称加密列表和随机数 client-random 给服务器，服务器生成随机数 service-random，选择加密套件和公钥返回给浏览器，浏览器利用 client-random 和 service-random 计算出 pre-master，然后利用公钥给 pre-master 加密，向服务器发送加密后的数据，服务器用私钥解密出 pre-master 数据，结合 client-random 和 service-random 生成对称密钥，使用对称密钥传输加密数据；
- 引入数字证书是为了证明“我就是我”，防止 DNS 被劫持，伪造服务器；
- 证书的作用：一个是向浏览器证明服务器的身份，另一个是包含服务器公钥；
- 数字签名过程：CA 使用 Hash 函数技术明文信息，得出信息摘要，然后 CA 使用私钥对信息摘要进行加密，加密后的秘文就是数字签名；
- 验证数字签名：读取证书明文信息，使用相同 Hash 函数计算得到信息摘要 A，再利用 CA 的公钥解密得到 B，对比 A 和 B，如果一致，则确认证书合法；

## 参考文章

| 作者    | 文章名称                                                     |
| ------- | ------------------------------------------------------------ |
| 闪客sun | [HTTPS 加密了什么内容？](https://www.zhihu.com/question/28617156/answer/2059783991) |

